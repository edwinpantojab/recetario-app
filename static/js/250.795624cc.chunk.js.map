{"version":3,"file":"static/js/250.795624cc.chunk.js","mappings":"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","sources":["../node_modules/lucide-react/src/icons/tag.ts","../node_modules/lucide-react/src/icons/minus.ts","data/defaultShoppingItems.js","components/ShoppingList.js","data/constants.js","../node_modules/lucide-react/src/icons/plus.ts","components/layout/Modal.js","components/ui/CustomConfirmModal.js","../node_modules/lucide-react/src/icons/circle-plus.ts","../node_modules/lucide-react/src/icons/rotate-ccw.ts","../node_modules/lucide-react/src/icons/trash-2.ts"],"sourcesContent":["import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Tag\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTIuNTg2IDIuNTg2QTIgMiAwIDAgMCAxMS4xNzIgMkg0YTIgMiAwIDAgMC0yIDJ2Ny4xNzJhMiAyIDAgMCAwIC41ODYgMS40MTRsOC43MDQgOC43MDRhMi40MjYgMi40MjYgMCAwIDAgMy40MiAwbDYuNTgtNi41OGEyLjQyNiAyLjQyNiAwIDAgMCAwLTMuNDJ6IiAvPgogIDxjaXJjbGUgY3g9IjcuNSIgY3k9IjcuNSIgcj0iLjUiIGZpbGw9ImN1cnJlbnRDb2xvciIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/tag\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Tag = createLucideIcon('Tag', [\n  [\n    'path',\n    {\n      d: 'M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z',\n      key: 'vktsd0',\n    },\n  ],\n  ['circle', { cx: '7.5', cy: '7.5', r: '.5', fill: 'currentColor', key: 'kqv944' }],\n]);\n\nexport default Tag;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Minus\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNNSAxMmgxNCIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/minus\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Minus = createLucideIcon('Minus', [['path', { d: 'M5 12h14', key: '1ays0h' }]]);\n\nexport default Minus;\n","/**\r\n * @fileoverview Items predeterminados para la lista de compras del Recetario Mágico\r\n * Contiene productos organizados por categorías para inicializar listas de compras\r\n * Optimizado para rendimiento y mantenibilidad\r\n * @author Sistema de gestión de recetas\r\n * @version 2.0.0\r\n */\r\n\r\nimport { DEFAULT_SHOPPING_CATEGORIES } from \"./constants.js\";\r\n\r\n/**\r\n * Configuración optimizada para items de compras por defecto\r\n * Centralizadas para fácil mantenimiento y modificación\r\n */\r\nconst SHOPPING_CONFIG = Object.freeze({\r\n  // Timestamp base para evitar recálculos repetidos de Date\r\n  BASE_TIMESTAMP: new Date(\"2024-01-01T00:00:00.000Z\").toISOString(),\r\n\r\n  // Estados por defecto para todos los items\r\n  DEFAULT_ITEM_STATE: Object.freeze({\r\n    checked: false,\r\n    price: null,\r\n    quantity: 1,\r\n    custom: false,\r\n    toBuy: false,\r\n  }),\r\n\r\n  // Mapeo de categorías para mejor organización\r\n  CATEGORIES: Object.freeze({\r\n    SUPERMARKET: DEFAULT_SHOPPING_CATEGORIES[0], // \"Supermercado\"\r\n    DAIRY: DEFAULT_SHOPPING_CATEGORIES[1], // \"Lácteos\"\r\n    MEAT: DEFAULT_SHOPPING_CATEGORIES[2], // \"Carnes\"\r\n    PRODUCE: DEFAULT_SHOPPING_CATEGORIES[3], // \"Verduras y Frutas\"\r\n    HYGIENE: DEFAULT_SHOPPING_CATEGORIES[4], // \"Aseo\"\r\n    OTHERS: DEFAULT_SHOPPING_CATEGORIES[5], // \"Otros\"\r\n  }),\r\n});\r\n\r\n/**\r\n * Función auxiliar para crear un item de compras optimizado\r\n * Elimina duplicación de código y asegura consistencia\r\n *\r\n * @param {Object} itemData - Datos del item\r\n * @param {string} itemData.id - ID único del item\r\n * @param {string} itemData.name - Nombre del producto\r\n * @param {string} itemData.category - Categoría del producto\r\n * @returns {Object} Item formateado y optimizado\r\n */\r\nconst createShoppingItem = ({ id, name, category }) => {\r\n  return Object.freeze({\r\n    id,\r\n    name,\r\n    category,\r\n    ...SHOPPING_CONFIG.DEFAULT_ITEM_STATE,\r\n    createdAt: SHOPPING_CONFIG.BASE_TIMESTAMP,\r\n  });\r\n};\r\n\r\n/**\r\n * Datos base para generar items por categoría\r\n * Organizados para fácil mantenimiento y modificación\r\n */\r\nconst ITEMS_DATA = Object.freeze({\r\n  // =============================================================================\r\n  // SUPERMERCADO 🛒\r\n  // =============================================================================\r\n  [SHOPPING_CONFIG.CATEGORIES.SUPERMARKET]: Object.freeze([\r\n    { name: \"Arroz\", id: \"item-super-1\" },\r\n    { name: \"Pasta seco\", id: \"item-super-2\" },\r\n    { name: \"Pasta fideos\", id: \"item-super-3\" },\r\n    { name: \"Pasta sopa\", id: \"item-super-4\" },\r\n    { name: \"Aceite vegetal\", id: \"item-super-5\" },\r\n    { name: \"Aceite de oliva\", id: \"item-super-6\" },\r\n    { name: \"Panela\", id: \"item-super-7\" },\r\n    { name: \"Azúcar\", id: \"item-super-8\" },\r\n    { name: \"Sal\", id: \"item-super-9\" },\r\n    { name: \"Frijol\", id: \"item-super-10\" },\r\n    { name: \"Lenteja\", id: \"item-super-11\" },\r\n    { name: \"Arveja\", id: \"item-super-12\" },\r\n    { name: \"Maíz peto\", id: \"item-super-13\" },\r\n    { name: \"Garbanzo\", id: \"item-super-14\" },\r\n    { name: \"Chocolate\", id: \"item-super-15\" },\r\n    { name: \"Pan tajado\", id: \"item-super-16\" },\r\n    { name: \"Tostadas\", id: \"item-super-17\" },\r\n    { name: \"Galletas de sal\", id: \"item-super-18\" },\r\n    { name: \"Galletas dulces\", id: \"item-super-19\" },\r\n    { name: \"Harina de trigo\", id: \"item-super-20\" },\r\n    { name: \"Harina de arepas\", id: \"item-super-21\" },\r\n    { name: \"Maizena\", id: \"item-super-22\" },\r\n    { name: \"Avena en hojuelas\", id: \"item-super-23\" },\r\n    { name: \"Canela\", id: \"item-super-24\" },\r\n    { name: \"Color\", id: \"item-super-25\" },\r\n    { name: \"Bicarbonato\", id: \"item-super-26\" },\r\n    { name: \"Vinagreta\", id: \"item-super-27\" },\r\n    { name: \"Uvas pasas\", id: \"item-super-28\" },\r\n    { name: \"Bocadillo\", id: \"item-super-29\" },\r\n    { name: \"Café\", id: \"item-super-30\" },\r\n    { name: \"Salsa de tomate\", id: \"item-super-31\" },\r\n    { name: \"Durazno en lata\", id: \"item-super-32\" },\r\n    { name: \"Salsa tártara\", id: \"item-super-33\" },\r\n    { name: \"Mayonesa\", id: \"item-super-34\" },\r\n    { name: \"Galletas de mesa\", id: \"item-super-35\" },\r\n    { name: \"Café en grano\", id: \"item-super-36\" },\r\n    { name: \"Comino\", id: \"item-super-37\" },\r\n    { name: \"Clavo\", id: \"item-super-38\" },\r\n    { name: \"Canela en astilla\", id: \"item-super-39\" },\r\n    { name: \"Canela en polvo\", id: \"item-super-40\" },\r\n    { name: \"Avena en harina\", id: \"item-super-41\" },\r\n    { name: \"Mermelada\", id: \"item-super-42\" },\r\n    { name: \"Papas fritas de paquete\", id: \"item-super-43\" },\r\n  ]),\r\n\r\n  // =============================================================================\r\n  // CARNES 🥩\r\n  // =============================================================================\r\n  [SHOPPING_CONFIG.CATEGORIES.MEAT]: Object.freeze([\r\n    { name: \"Pollo entero\", id: \"item-carnes-1\" },\r\n    { name: \"Pollo molido\", id: \"item-carnes-2\" },\r\n    { name: \"Pechuga de pollo\", id: \"item-carnes-3\" },\r\n    { name: \"Pierna pernil\", id: \"item-carnes-4\" },\r\n    { name: \"Carne molida\", id: \"item-carnes-5\" },\r\n    { name: \"Carne de res\", id: \"item-carnes-6\" },\r\n    { name: \"Carne de cerdo\", id: \"item-carnes-7\" },\r\n    { name: \"Pescado\", id: \"item-carnes-8\" },\r\n    { name: \"Salchichas\", id: \"item-carnes-9\" },\r\n  ]),\r\n\r\n  // =============================================================================\r\n  // LÁCTEOS 🥛\r\n  // =============================================================================\r\n  [SHOPPING_CONFIG.CATEGORIES.DAIRY]: Object.freeze([\r\n    { name: \"Queso tajado\", id: \"item-lacteos-1\" },\r\n    { name: \"Queso entero\", id: \"item-lacteos-2\" },\r\n    { name: \"Yogurt\", id: \"item-lacteos-3\" },\r\n    { name: \"Yogurt en vaso\", id: \"item-lacteos-4\" },\r\n    { name: \"Yogurt en bolsa\", id: \"item-lacteos-5\" },\r\n    { name: \"Leche\", id: \"item-lacteos-6\" },\r\n    { name: \"Leche en polvo\", id: \"item-lacteos-7\" },\r\n    { name: \"Huevos\", id: \"item-lacteos-8\" },\r\n    { name: \"Crema de leche\", id: \"item-lacteos-9\" },\r\n    { name: \"Leche condensada\", id: \"item-lacteos-10\" },\r\n    { name: \"Mantequilla de mesa\", id: \"item-lacteos-11\" },\r\n    { name: \"Mantequilla para cocina\", id: \"item-lacteos-12\" },\r\n  ]),\r\n\r\n  // =============================================================================\r\n  // VERDURAS Y FRUTAS 🥕🍎\r\n  // =============================================================================\r\n  [SHOPPING_CONFIG.CATEGORIES.PRODUCE]: Object.freeze([\r\n    { name: \"Tomates\", id: \"item-verfrutas-1\" },\r\n    { name: \"Cebollas cabezonas\", id: \"item-verfrutas-2\" },\r\n    { name: \"Papas\", id: \"item-verfrutas-3\" },\r\n    { name: \"Manzanas\", id: \"item-verfrutas-4\" },\r\n    { name: \"Ajos\", id: \"item-verfrutas-5\" },\r\n    { name: \"Papaya\", id: \"item-verfrutas-6\" },\r\n    { name: \"Lulo\", id: \"item-verfrutas-7\" },\r\n    { name: \"Tomate de árbol\", id: \"item-verfrutas-8\" },\r\n    { name: \"Limones\", id: \"item-verfrutas-9\" },\r\n    { name: \"Ahuyama\", id: \"item-verfrutas-10\" },\r\n    { name: \"Calabacín\", id: \"item-verfrutas-11\" },\r\n    { name: \"Naranjas\", id: \"item-verfrutas-12\" },\r\n    { name: \"Mandarinas\", id: \"item-verfrutas-13\" },\r\n    { name: \"Coliflor\", id: \"item-verfrutas-14\" },\r\n    { name: \"Espinacas\", id: \"item-verfrutas-15\" },\r\n    { name: \"Acelgas\", id: \"item-verfrutas-16\" },\r\n    { name: \"Cebolla larga\", id: \"item-verfrutas-17\" },\r\n    { name: \"Piña\", id: \"item-verfrutas-18\" },\r\n    { name: \"Plátano verde\", id: \"item-verfrutas-19\" },\r\n    { name: \"Plátano maduro\", id: \"item-verfrutas-20\" },\r\n    { name: \"Bananos\", id: \"item-verfrutas-21\" },\r\n    { name: \"Cerezas\", id: \"item-verfrutas-22\" },\r\n  ]),\r\n\r\n  // =============================================================================\r\n  // ASEO 🧼\r\n  // =============================================================================\r\n  [SHOPPING_CONFIG.CATEGORIES.HYGIENE]: Object.freeze([\r\n    { name: \"Jabón para manos\", id: \"item-aseo-1\" },\r\n    { name: \"Jabón líquido para ropa\", id: \"item-aseo-2\" },\r\n    { name: \"Jabón líquido para platos\", id: \"item-aseo-3\" },\r\n    { name: \"Jabón lavavajillas\", id: \"item-aseo-4\" },\r\n    { name: \"Jabón en pasta para ropa\", id: \"item-aseo-5\" },\r\n    { name: \"Esponjas\", id: \"item-aseo-6\" },\r\n    { name: \"Esponjillas\", id: \"item-aseo-7\" },\r\n    { name: \"Tampones\", id: \"item-aseo-8\" },\r\n    { name: \"Toallas higiénicas\", id: \"item-aseo-9\" },\r\n    { name: \"Papel higiénico\", id: \"item-aseo-10\" },\r\n    { name: \"Crema dental\", id: \"item-aseo-11\" },\r\n    { name: \"Protectores\", id: \"item-aseo-12\" },\r\n    { name: \"Cepillo de dientes\", id: \"item-aseo-13\" },\r\n    { name: \"Guantes para ropa\", id: \"item-aseo-14\" },\r\n    { name: \"Desodorante para dama\", id: \"item-aseo-15\" },\r\n    { name: \"Desodorante para hombre\", id: \"item-aseo-16\" },\r\n    { name: \"Shampoo para dama\", id: \"item-aseo-17\" },\r\n    { name: \"Shampoo para hombre\", id: \"item-aseo-18\" },\r\n    { name: \"Shampoo para niños\", id: \"item-aseo-19\" },\r\n    { name: \"Crema corporal\", id: \"item-aseo-20\" },\r\n    { name: \"Cepillo de dientes para adulto\", id: \"item-aseo-21\" },\r\n    { name: \"Cepillo de dientes para niño\", id: \"item-aseo-22\" },\r\n    { name: \"Crema corporal para hombre\", id: \"item-aseo-23\" },\r\n    { name: \"Crema corporal para mujer\", id: \"item-aseo-24\" },\r\n    { name: \"Crema dental para adulto\", id: \"item-aseo-25\" },\r\n    { name: \"Crema dental para niños\", id: \"item-aseo-26\" },\r\n    { name: \"Máquina de afeitar\", id: \"item-aseo-27\" },\r\n    { name: \"Blanqueador\", id: \"item-aseo-28\" },\r\n    { name: \"Suavizante para ropa\", id: \"item-aseo-29\" },\r\n    { name: \"Bolsas de basura\", id: \"item-aseo-30\" },\r\n    { name: \"Ambientador líquido\", id: \"item-aseo-31\" },\r\n  ]),\r\n});\r\n\r\n/**\r\n * Genera el array de items de compras optimizado\r\n * Evita duplicación de código y mejora el rendimiento\r\n *\r\n * @returns {Array} Array de items de compras formateados\r\n */\r\nconst generateShoppingItems = () => {\r\n  const items = [];\r\n\r\n  // Iterar sobre cada categoría y sus items\r\n  Object.entries(ITEMS_DATA).forEach(([category, categoryItems]) => {\r\n    categoryItems.forEach(({ name, id }) => {\r\n      items.push(createShoppingItem({ id, name, category }));\r\n    });\r\n  });\r\n\r\n  return Object.freeze(items);\r\n};\r\n\r\n/**\r\n * Array principal de items predeterminados para la lista de compras\r\n * Cada item incluye:\r\n * - id: Identificador único para el producto\r\n * - name: Nombre del producto\r\n * - checked: Estado de comprado (false por defecto)\r\n * - price: Precio unitario (null por defecto)\r\n * - quantity: Cantidad del producto (1 por defecto)\r\n * - custom: Indica si es personalizado (false para predeterminados)\r\n * - category: Categoría a la que pertenece\r\n * - createdAt: Fecha de creación en formato ISO\r\n * - toBuy: Estado de marcado para comprar (false por defecto)\r\n */\r\nexport const DEFAULT_SHOPPING_ITEMS = generateShoppingItems();\r\n\r\n// =============================================================================\r\n// COMPUTED VALUES - Valores derivados para optimización\r\n// =============================================================================\r\n\r\n/**\r\n * Map optimizado de items por categoría para acceso O(1)\r\n * Evita filtros repetidos en tiempo de ejecución\r\n */\r\nexport const ITEMS_BY_CATEGORY = Object.freeze(\r\n  DEFAULT_SHOPPING_ITEMS.reduce((acc, item) => {\r\n    if (!acc[item.category]) {\r\n      acc[item.category] = [];\r\n    }\r\n    acc[item.category].push(item);\r\n    return acc;\r\n  }, {})\r\n);\r\n\r\n/**\r\n * Set optimizado de IDs de items para validación O(1)\r\n * Útil para verificar si un item existe\r\n */\r\nexport const ITEM_IDS_SET = new Set(\r\n  DEFAULT_SHOPPING_ITEMS.map((item) => item.id)\r\n);\r\n\r\n/**\r\n * Map optimizado de items por ID para acceso directo O(1)\r\n * Evita búsquedas lineales en el array\r\n */\r\nexport const ITEMS_BY_ID = new Map(\r\n  DEFAULT_SHOPPING_ITEMS.map((item) => [item.id, item])\r\n);\r\n\r\n/**\r\n * Estadísticas computadas de los items para métricas\r\n * Valores pre-calculados para mejor rendimiento\r\n */\r\nexport const SHOPPING_STATS = Object.freeze({\r\n  TOTAL_ITEMS: DEFAULT_SHOPPING_ITEMS.length,\r\n  CATEGORIES_COUNT: Object.keys(ITEMS_BY_CATEGORY).length,\r\n  ITEMS_PER_CATEGORY: Object.freeze(\r\n    Object.fromEntries(\r\n      Object.entries(ITEMS_BY_CATEGORY).map(([category, items]) => [\r\n        category,\r\n        items.length,\r\n      ])\r\n    )\r\n  ),\r\n});\r\n\r\n// =============================================================================\r\n// UTILITY FUNCTIONS - Funciones de utilidad\r\n// =============================================================================\r\n\r\n/**\r\n * Obtiene items por categoría específica\r\n * Optimizado para acceso directo sin filtros\r\n *\r\n * @param {string} category - Nombre de la categoría\r\n * @returns {Array} Items de la categoría especificada\r\n */\r\nexport const getItemsByCategory = (category) => {\r\n  return ITEMS_BY_CATEGORY[category] || [];\r\n};\r\n\r\n/**\r\n * Verifica si un ID de item existe\r\n * Optimizado con Set para búsqueda O(1)\r\n *\r\n * @param {string} itemId - ID del item a verificar\r\n * @returns {boolean} True si el item existe\r\n */\r\nexport const itemExists = (itemId) => {\r\n  return ITEM_IDS_SET.has(itemId);\r\n};\r\n\r\n/**\r\n * Obtiene un item por su ID\r\n * Optimizado con Map para acceso directo O(1)\r\n *\r\n * @param {string} itemId - ID del item a obtener\r\n * @returns {Object|undefined} Item encontrado o undefined\r\n */\r\nexport const getItemById = (itemId) => {\r\n  return ITEMS_BY_ID.get(itemId);\r\n};\r\n\r\n// =============================================================================\r\n// DEPRECATED - Mantenidos para compatibilidad hacia atrás\r\n// =============================================================================\r\n\r\n/**\r\n * @deprecated Usar DEFAULT_SHOPPING_ITEMS en su lugar\r\n * Mantenido para compatibilidad con código existente\r\n */\r\nexport const defaultShoppingItems = DEFAULT_SHOPPING_ITEMS;\r\n","/**\r\n * @fileoverview Componente ShoppingList optimizado para el Recetario Mágico\r\n * Gestiona listas de compras con categorías, presupuesto y persistencia local\r\n * Optimizado para rendimiento y manejo de errores\r\n * @author Sistema de gestión de recetas\r\n * @version 2.0.0\r\n */\r\n\r\nimport React, {\r\n  useState,\r\n  useEffect,\r\n  useCallback,\r\n  useMemo,\r\n  useRef,\r\n} from \"react\";\r\nimport {\r\n  ShoppingCart,\r\n  PlusCircle,\r\n  RotateCcw,\r\n  X,\r\n  Tag,\r\n  Plus,\r\n  Minus,\r\n  Trash2,\r\n} from \"lucide-react\";\r\nimport CustomConfirmModal from \"./ui/CustomConfirmModal\"; // Corregido: Se movió a la subcarpeta ui\r\nimport { saveData, loadData } from \"../data/localStorageHelpers\";\r\nimport { DEFAULT_SHOPPING_ITEMS } from \"../data/defaultShoppingItems\";\r\nimport { DEFAULT_SHOPPING_CATEGORIES } from \"../data/constants\";\r\nimport { trackRecipeEvent } from \"../utils/analytics\";\r\n\r\n// =============================================================================\r\n// CONFIGURACIÓN Y OPTIMIZACIONES DEL COMPONENTE\r\n// =============================================================================\r\n\r\n/**\r\n * Configuración optimizada para localStorage con debounce\r\n * Mejora el rendimiento evitando escrituras excesivas\r\n */\r\nconst STORAGE_CONFIG = Object.freeze({\r\n  ITEMS_KEY: \"shoppingItems\",\r\n  SETTINGS_KEY: \"shoppingListSettings\",\r\n  DEBOUNCE_DELAY: 500, // ms\r\n});\r\n\r\n/**\r\n * Configuración de formateo de precios\r\n * Centralizada para consistencia en toda la aplicación\r\n */\r\nconst PRICE_CONFIG = Object.freeze({\r\n  MIN_VALUE_FOR_FORMATTING: 1000,\r\n  THOUSANDS_SEPARATOR: \".\",\r\n  DECIMAL_SEPARATOR: \",\",\r\n  DECIMAL_PLACES: 0,\r\n});\r\n\r\n/**\r\n * Sistema de logging condicional para desarrollo\r\n * Permite desactivar logs fácilmente en producción\r\n */\r\nconst DEBUG_MODE = process.env.NODE_ENV === \"development\";\r\nconst log = {\r\n  error: DEBUG_MODE ? (...args) => console.error(...args) : () => {}, // eslint-disable-line no-console\r\n  warn: DEBUG_MODE ? (...args) => console.warn(...args) : () => {}, // eslint-disable-line no-console\r\n  info: DEBUG_MODE ? (...args) => console.info(...args) : () => {}, // eslint-disable-line no-console\r\n};\r\n\r\n// =============================================================================\r\n// HOOKS PERSONALIZADOS Y HELPERS\r\n// =============================================================================\r\n\r\n/**\r\n * Hook personalizado para formateo y parsing de precios\r\n * Optimizado para rendimiento con memoización\r\n */\r\nconst usePriceFormatting = () => {\r\n  // Formatea un número como string con separadores de miles\r\n  const formatPrice = useCallback(value => {\r\n    if (value === null || value === undefined || isNaN(value) || value === 0) {\r\n      return \"\";\r\n    }\r\n\r\n    const numValue = Number(value);\r\n    if (numValue >= PRICE_CONFIG.MIN_VALUE_FOR_FORMATTING) {\r\n      return numValue\r\n        .toString()\r\n        .replace(/\\B(?=(\\d{3})+(?!\\d))/g, PRICE_CONFIG.THOUSANDS_SEPARATOR);\r\n    }\r\n\r\n    return numValue.toString();\r\n  }, []);\r\n\r\n  // Parsea string formateado a número\r\n  const parsePrice = useCallback(value => {\r\n    if (!value || typeof value !== \"string\") return 0;\r\n\r\n    const cleanValue = value.replace(/[^\\d]/g, \"\");\r\n    const numValue = parseInt(cleanValue, 10);\r\n    return isNaN(numValue) ? 0 : numValue;\r\n  }, []);\r\n\r\n  // Formatea mientras se escribe (input en tiempo real)\r\n  const formatWhileTyping = useCallback(value => {\r\n    const numbersOnly = value.replace(/[^\\d]/g, \"\");\r\n    if (numbersOnly === \"\") return \"\";\r\n\r\n    const numValue = parseInt(numbersOnly, 10);\r\n    if (numValue >= PRICE_CONFIG.MIN_VALUE_FOR_FORMATTING) {\r\n      return numValue\r\n        .toString()\r\n        .replace(/\\B(?=(\\d{3})+(?!\\d))/g, PRICE_CONFIG.THOUSANDS_SEPARATOR);\r\n    }\r\n\r\n    return numbersOnly;\r\n  }, []);\r\n\r\n  return { formatPrice, parsePrice, formatWhileTyping };\r\n};\r\n\r\n/**\r\n * Hook personalizado para gestión de localStorage con validación\r\n * Incluye validación de tipos y manejo de errores\r\n */\r\nconst useShoppingStorage = () => {\r\n  // Carga items con validación de array\r\n  const getLocalShoppingItems = useCallback(async () => {\r\n    try {\r\n      const items = await loadData(STORAGE_CONFIG.ITEMS_KEY, [\r\n        ...DEFAULT_SHOPPING_ITEMS,\r\n      ]);\r\n      return Array.isArray(items) ? items : [...DEFAULT_SHOPPING_ITEMS];\r\n    } catch (error) {\r\n      log.error(\"Error cargando items de localStorage:\", error);\r\n      return [...DEFAULT_SHOPPING_ITEMS];\r\n    }\r\n  }, []);\r\n\r\n  // Guarda items con validación\r\n  const setLocalShoppingItems = useCallback(async items => {\r\n    try {\r\n      if (!Array.isArray(items)) {\r\n        throw new Error(\"Items debe ser un array\");\r\n      }\r\n      await saveData(STORAGE_CONFIG.ITEMS_KEY, items);\r\n    } catch (error) {\r\n      log.error(\"Error guardando items en localStorage:\", error);\r\n      throw error;\r\n    }\r\n  }, []);\r\n\r\n  // Carga configuraciones con valores por defecto\r\n  const getLocalShoppingSettings = useCallback(async () => {\r\n    try {\r\n      const settings = await loadData(STORAGE_CONFIG.SETTINGS_KEY, {\r\n        customCategories: [],\r\n        budget: \"\",\r\n      });\r\n      return {\r\n        customCategories: Array.isArray(settings.customCategories)\r\n          ? settings.customCategories\r\n          : [],\r\n        budget: settings.budget || \"\",\r\n      };\r\n    } catch (error) {\r\n      log.error(\"Error cargando configuraciones de localStorage:\", error);\r\n      return { customCategories: [], budget: \"\" };\r\n    }\r\n  }, []);\r\n\r\n  // Guarda configuraciones\r\n  const setLocalShoppingSettings = useCallback(async settings => {\r\n    try {\r\n      await saveData(STORAGE_CONFIG.SETTINGS_KEY, settings);\r\n    } catch (error) {\r\n      log.error(\"Error guardando configuraciones en localStorage:\", error);\r\n      throw error;\r\n    }\r\n  }, []);\r\n\r\n  return {\r\n    getLocalShoppingItems,\r\n    setLocalShoppingItems,\r\n    getLocalShoppingSettings,\r\n    setLocalShoppingSettings,\r\n  };\r\n};\r\n\r\n/**\r\n * Componente ShoppingList.\r\n * Permite a los usuarios gestionar una lista de compras, añadir/eliminar productos,\r\n * categorizarlos, y llevar un control de un presupuesto.\r\n *\r\n * @param {object} props - Las propiedades del componente.\r\n * @param {function} props.showToast - Función para mostrar notificaciones toast.\r\n */\r\nconst ShoppingList = ({ showToast }) => {\r\n  // Estados del componente con validación de arrays\r\n  const [shoppingItems, setShoppingItems] = useState([]);\r\n  const [newItemName, setNewItemName] = useState(\"\");\r\n  const [newItemCategory, setNewItemCategory] = useState(\"Supermercado\");\r\n  // NUEVO: Estado para filtrar por categorías\r\n  const [selectedCategoryFilter, setSelectedCategoryFilter] = useState(\r\n    \"Todas las categorías\"\r\n  );\r\n  const [isLoadingShoppingList, setIsLoadingShoppingList] = useState(true);\r\n  const [errorShoppingList, setErrorShoppingList] = useState(null);\r\n\r\n  const [userShoppingCategories, setUserShoppingCategories] = useState([]);\r\n  const [newCustomCategory, setNewCustomCategory] = useState(\"\");\r\n  const [budget, setBudget] = useState(\"\");\r\n  const [isConfirmDeleteItemModalOpen, setIsConfirmDeleteItemModalOpen] =\r\n    useState(false);\r\n  const [itemToDeleteId, setItemToDeleteId] = useState(null);\r\n\r\n  const [isConfirmResetModalOpen, setIsConfirmResetModalOpen] = useState(false);\r\n  const [resetAction, setResetAction] = useState(null);\r\n\r\n  const saveTimeoutRef = useRef(null); // Ref para el temporizador de debounce\r\n\r\n  // Usar los hooks personalizados optimizados\r\n  const { formatPrice, parsePrice, formatWhileTyping } = usePriceFormatting();\r\n  const {\r\n    getLocalShoppingItems,\r\n    setLocalShoppingItems,\r\n    getLocalShoppingSettings,\r\n    setLocalShoppingSettings,\r\n  } = useShoppingStorage();\r\n\r\n  // Cargar settings y items de localStorage al montar con validación de arrays\r\n  useEffect(() => {\r\n    const loadData = async () => {\r\n      setIsLoadingShoppingList(true);\r\n      try {\r\n        const localItems = await getLocalShoppingItems();\r\n        const localSettings = await getLocalShoppingSettings();\r\n\r\n        // Validar que localItems sea un array\r\n        const validItems = Array.isArray(localItems) ? localItems : [];\r\n        setShoppingItems(validItems);\r\n\r\n        setUserShoppingCategories(\r\n          Array.isArray(localSettings.customCategories)\r\n            ? localSettings.customCategories\r\n            : []\r\n        );\r\n\r\n        setBudget(\r\n          localSettings.budget\r\n            ? formatPrice(parsePrice(localSettings.budget))\r\n            : \"\"\r\n        );\r\n        setIsLoadingShoppingList(false);\r\n      } catch (e) {\r\n        log.error(\"Error cargando datos:\", e);\r\n        setErrorShoppingList(e);\r\n        setIsLoadingShoppingList(false);\r\n        // Inicializar con arrays vacíos en caso de error\r\n        setShoppingItems([]);\r\n        setUserShoppingCategories([]);\r\n        setBudget(\"\");\r\n        showToast && showToast(\"Error al cargar datos de la lista.\", \"error\");\r\n      }\r\n    };\r\n\r\n    loadData();\r\n  }, [\r\n    getLocalShoppingItems,\r\n    getLocalShoppingSettings,\r\n    showToast,\r\n    formatPrice,\r\n    parsePrice,\r\n  ]);\r\n\r\n  // Actualiza settings en localStorage usando el hook optimizado\r\n  const updateSettings = useCallback(\r\n    async newSettings => {\r\n      try {\r\n        await setLocalShoppingSettings(newSettings);\r\n        setUserShoppingCategories(\r\n          Array.isArray(newSettings.customCategories)\r\n            ? newSettings.customCategories\r\n            : []\r\n        );\r\n        // Formatear el presupuesto al actualizar settings para mantener la UI consistente\r\n        setBudget(\r\n          newSettings.budget ? formatPrice(parsePrice(newSettings.budget)) : \"\"\r\n        );\r\n      } catch (error) {\r\n        log.error(\"Error actualizando configuraciones:\", error);\r\n        showToast && showToast(\"Error al guardar configuraciones.\", \"error\");\r\n      }\r\n    },\r\n    [setLocalShoppingSettings, formatPrice, parsePrice, showToast]\r\n  );\r\n\r\n  // Actualiza items en localStorage con debounce usando el hook optimizado\r\n  const updateItems = useCallback(\r\n    newItems => {\r\n      // Validar que newItems sea un array\r\n      const validItems = Array.isArray(newItems) ? newItems : [];\r\n      setShoppingItems([...validItems]); // Actualiza la UI inmediatamente\r\n\r\n      if (saveTimeoutRef.current) {\r\n        clearTimeout(saveTimeoutRef.current); // Limpia el temporizador anterior\r\n      }\r\n\r\n      saveTimeoutRef.current = setTimeout(async () => {\r\n        try {\r\n          await setLocalShoppingItems(validItems); // Guarda en localStorage después de un retraso\r\n        } catch (error) {\r\n          log.error(\"Error guardando items:\", error);\r\n          showToast && showToast(\"Error al guardar la lista.\", \"error\");\r\n        }\r\n      }, STORAGE_CONFIG.DEBOUNCE_DELAY);\r\n    },\r\n    [setLocalShoppingItems, showToast]\r\n  );\r\n\r\n  // Efecto para limpiar el temporizador al desmontar\r\n  useEffect(() => {\r\n    return () => {\r\n      if (saveTimeoutRef.current) {\r\n        clearTimeout(saveTimeoutRef.current);\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  // Combina las categorías por defecto con las categorías personalizadas del usuario\r\n  const allShoppingCategories = useMemo(() => {\r\n    const orderedCategories = [...DEFAULT_SHOPPING_CATEGORIES];\r\n    const customCategoriesToAdd = userShoppingCategories\r\n      .filter(cat => !DEFAULT_SHOPPING_CATEGORIES.includes(cat))\r\n      .sort((a, b) => a.localeCompare(b));\r\n    return [...orderedCategories, ...customCategoriesToAdd];\r\n  }, [userShoppingCategories]);\r\n\r\n  // Asegura que la categoría del nuevo ítem sea siempre una categoría válida\r\n  useEffect(() => {\r\n    if (\r\n      allShoppingCategories.length > 0 &&\r\n      !allShoppingCategories.includes(newItemCategory)\r\n    ) {\r\n      setNewItemCategory(allShoppingCategories[0]);\r\n    }\r\n  }, [allShoppingCategories, newItemCategory]);\r\n\r\n  // Añadir una nueva categoría personalizada\r\n  const handleAddCustomCategory = useCallback(async () => {\r\n    if (!newCustomCategory.trim()) return; // Evitar añadir categorías vacías\r\n    const categoryToAdd = newCustomCategory.trim();\r\n    if (\r\n      allShoppingCategories\r\n        .map(c => c.toLowerCase())\r\n        .includes(categoryToAdd.toLowerCase())\r\n    ) {\r\n      showToast && showToast(\"Esa categoría ya existe.\", \"warning\");\r\n      return;\r\n    }\r\n    try {\r\n      const newSettings = await getLocalShoppingSettings();\r\n      newSettings.customCategories = [\r\n        ...(Array.isArray(newSettings.customCategories)\r\n          ? newSettings.customCategories\r\n          : []),\r\n        categoryToAdd,\r\n      ];\r\n      await updateSettings(newSettings);\r\n      setNewCustomCategory(\"\");\r\n      showToast && showToast(\"Categoría añadida.\", \"success\");\r\n    } catch (error) {\r\n      log.error(\"Error añadiendo categoría:\", error);\r\n      showToast && showToast(\"Error al añadir categoría.\", \"error\");\r\n    }\r\n  }, [\r\n    newCustomCategory,\r\n    allShoppingCategories,\r\n    updateSettings,\r\n    showToast,\r\n    getLocalShoppingSettings,\r\n  ]);\r\n\r\n  // Eliminar una categoría personalizada\r\n  const handleDeleteCustomCategory = useCallback(\r\n    async categoryToDelete => {\r\n      if (DEFAULT_SHOPPING_CATEGORIES.includes(categoryToDelete)) {\r\n        showToast &&\r\n          showToast(\"No puedes eliminar una categoría por defecto.\", \"error\");\r\n        return;\r\n      }\r\n      try {\r\n        // Actualiza settings\r\n        const newSettings = await getLocalShoppingSettings();\r\n        newSettings.customCategories = (\r\n          Array.isArray(newSettings.customCategories)\r\n            ? newSettings.customCategories\r\n            : []\r\n        ).filter(cat => cat !== categoryToDelete);\r\n        await updateSettings(newSettings);\r\n\r\n        // Mueve los ítems de la categoría eliminada a \"Otros\"\r\n        const currentItems = await getLocalShoppingItems();\r\n        const validItems = Array.isArray(currentItems) ? currentItems : [];\r\n        const newItems = validItems.map(item =>\r\n          item.category === categoryToDelete\r\n            ? { ...item, category: \"Otros\" }\r\n            : item\r\n        );\r\n        updateItems(newItems);\r\n        showToast &&\r\n          showToast(\r\n            `Categoría \"${categoryToDelete}\" eliminada. Items movidos a \"Otros\".`,\r\n            \"success\"\r\n          );\r\n      } catch (error) {\r\n        log.error(\"Error eliminando categoría:\", error);\r\n        showToast && showToast(\"Error al eliminar categoría.\", \"error\");\r\n      }\r\n    },\r\n    [\r\n      updateSettings,\r\n      updateItems,\r\n      showToast,\r\n      getLocalShoppingSettings,\r\n      getLocalShoppingItems,\r\n    ]\r\n  );\r\n  // Añadir un nuevo ítem a la lista de compras con validación\r\n  const handleAddItem = useCallback(\r\n    e => {\r\n      e.preventDefault();\r\n      if (newItemName.trim() === \"\") return;\r\n\r\n      // Validar que shoppingItems sea un array\r\n      const currentItems = Array.isArray(shoppingItems) ? shoppingItems : [];\r\n\r\n      const newItem = {\r\n        id: `item-${Date.now()}-${Math.random()}`,\r\n        name: newItemName.trim(),\r\n        checked: false,\r\n        price: null, // Inicia sin precio\r\n        quantity: 1, // La cantidad siempre inicia en 1\r\n        custom: true,\r\n        category: newItemCategory || \"Supermercado\",\r\n        createdAt: new Date().toISOString(),\r\n        toBuy: false,\r\n      };\r\n      const newItems = [...currentItems, newItem];\r\n      updateItems(newItems);\r\n\r\n      // Track item added to shopping list\r\n      trackRecipeEvent.addToShoppingList(newItem.id, {\r\n        itemName: newItem.name,\r\n        category: newItem.category,\r\n        listSize: newItems.length,\r\n      });\r\n\r\n      setNewItemName(\"\");\r\n      showToast && showToast(\"Producto añadido.\", \"success\");\r\n    },\r\n    [newItemName, newItemCategory, shoppingItems, updateItems, showToast]\r\n  );\r\n  // Agrupa los ítems de la lista de compras por categoría y los ordena alfabéticamente por nombre\r\n  // ACTUALIZADO: Incluye filtro por categorías\r\n  const groupedItems = useMemo(() => {\r\n    const grouped = {};\r\n    // Validar que shoppingItems sea un array\r\n    const validItems = Array.isArray(shoppingItems) ? shoppingItems : [];\r\n\r\n    // Filtrar por categoría seleccionada\r\n    const filteredByCategory =\r\n      selectedCategoryFilter === \"Todas las categorías\"\r\n        ? validItems\r\n        : validItems.filter(item => item.category === selectedCategoryFilter);\r\n\r\n    allShoppingCategories.forEach(category => {\r\n      // Solo mostrar categorías que coincidan con el filtro\r\n      if (\r\n        selectedCategoryFilter !== \"Todas las categorías\" &&\r\n        category !== selectedCategoryFilter\r\n      ) {\r\n        return;\r\n      }\r\n\r\n      const itemsInCategory = filteredByCategory\r\n        .filter(item => item.category === category)\r\n        .sort((a, b) => (a.name || \"\").localeCompare(b.name || \"\"));\r\n      if (itemsInCategory.length > 0) {\r\n        grouped[category] = itemsInCategory;\r\n      }\r\n    });\r\n    return grouped;\r\n  }, [allShoppingCategories, shoppingItems, selectedCategoryFilter]);\r\n\r\n  // Calcula el presupuesto restante\r\n  const numericBudget = parsePrice(budget) || 0;\r\n  const totalCost = useMemo(\r\n    () => {\r\n      // Validar que shoppingItems sea un array\r\n      const validItems = Array.isArray(shoppingItems) ? shoppingItems : [];\r\n\r\n      return validItems.reduce((sum, item) => {\r\n        const price = Number(item.price); // El precio ya es numérico aquí\r\n        const quantity = Number(item.quantity) || 1;\r\n\r\n        // Solo verificar que el precio sea válido y mayor que 0\r\n        if (!isNaN(price) && price > 0) {\r\n          const itemTotal = price * quantity;\r\n          return sum + itemTotal;\r\n        }\r\n        return sum;\r\n      }, 0);\r\n    },\r\n    [shoppingItems] // Asegurar que se recalcule cuando shoppingItems cambie\r\n  );\r\n  const remainingBudget = numericBudget - totalCost;\r\n\r\n  // Actualizar un campo de un ítem existente (asegura que cantidad y precio sean números válidos)\r\n  const handleUpdateItem = useCallback(\r\n    (id, field, value) => {\r\n      // Validar que shoppingItems sea un array\r\n      const validItems = Array.isArray(shoppingItems) ? shoppingItems : [];\r\n\r\n      const newItems = validItems.map(item => {\r\n        if (item.id !== id) return item;\r\n\r\n        const updates = { ...item };\r\n\r\n        if (field === \"price\") {\r\n          // Al actualizar el precio, parseamos el valor que viene del input (que puede estar formateado)\r\n          const parsedValue = parsePrice(value);\r\n          updates[field] = isNaN(parsedValue) ? null : parsedValue; // Guardar como número o null\r\n        } else if (field === \"quantity\") {\r\n          const numValue = parseInt(value, 10);\r\n          updates[field] = isNaN(numValue) || numValue < 1 ? 1 : numValue;\r\n        } else if (field === \"checked\" && value === true) {\r\n          updates.checked = true;\r\n          updates.toBuy = false; // Desmarcar toBuy si se marca checked\r\n        } else if (field === \"toBuy\" && value === true) {\r\n          updates.toBuy = true;\r\n          updates.checked = false; // Desmarcar checked si se marca toBuy\r\n        } else {\r\n          updates[field] = value;\r\n        }\r\n        return updates;\r\n      });\r\n\r\n      updateItems(newItems);\r\n    },\r\n    [shoppingItems, updateItems, parsePrice] // Añadir parsePrice a las dependencias\r\n  );\r\n\r\n  // Abre el modal de confirmación para eliminar un ítem\r\n  const confirmDeleteItem = useCallback(id => {\r\n    setItemToDeleteId(id);\r\n    setIsConfirmDeleteItemModalOpen(true);\r\n  }, []);\r\n\r\n  // Elimina un ítem de la lista de compras después de la confirmación\r\n  const handleDeleteItem = useCallback(() => {\r\n    if (!itemToDeleteId) return;\r\n    setIsConfirmDeleteItemModalOpen(false);\r\n    setItemToDeleteId(null);\r\n\r\n    // Validar que shoppingItems sea un array\r\n    const validItems = Array.isArray(shoppingItems) ? shoppingItems : [];\r\n    const newItems = validItems.filter(item => item.id !== itemToDeleteId);\r\n    updateItems(newItems);\r\n    showToast && showToast(\"Producto eliminado.\", \"success\");\r\n  }, [itemToDeleteId, shoppingItems, updateItems, showToast]);\r\n  // Elimina todos los ítems marcados como \"comprados\" y desmarca los seleccionados para comprar\r\n  const handleClearCheckedItems = useCallback(() => {\r\n    // Validar que shoppingItems sea un array\r\n    const validItems = Array.isArray(shoppingItems) ? shoppingItems : [];\r\n\r\n    // Opción 1: Eliminar los items chequeados y resetear campos de los restantes\r\n    const itemsToKeep = validItems.filter(item => !item.checked);\r\n    const newItemsAfterClearing = itemsToKeep.map(item => ({\r\n      ...item,\r\n      toBuy: false, // Si se limpian los comprados, los que quedan para comprar también se resetean\r\n    }));\r\n\r\n    updateItems(newItemsAfterClearing); // Usar la lista filtrada y reseteada\r\n    showToast && showToast(\"Lista limpiada.\", \"success\");\r\n  }, [shoppingItems, updateItems, showToast]);\r\n  // Nueva función para restablecer completamente cuando el presupuesto es excedido\r\n  const handleResetWhenBudgetExceeded = useCallback(() => {\r\n    // Resetear todos los ítems a estado inicial\r\n    const validItems = Array.isArray(shoppingItems) ? shoppingItems : [];\r\n    const resetItems = validItems.map(item => ({\r\n      ...item,\r\n      checked: false,\r\n      toBuy: false,\r\n      quantity: 1,\r\n      price: null,\r\n      priceDisplay: undefined, // Limpiar campo temporal\r\n    }));\r\n\r\n    updateItems(resetItems);\r\n\r\n    // También resetear el presupuesto\r\n    setBudget(\"\");\r\n\r\n    showToast && showToast(\"Todo ha sido restablecido.\", \"success\");\r\n  }, [shoppingItems, updateItems, showToast]);\r\n\r\n  // Función para mostrar confirmación antes de restablecer\r\n  const confirmReset = useCallback(() => {\r\n    setResetAction(remainingBudget < 0 ? \"full\" : \"partial\");\r\n    setIsConfirmResetModalOpen(true);\r\n  }, [remainingBudget]);\r\n\r\n  // Función para ejecutar el reset confirmado\r\n  const executeReset = useCallback(() => {\r\n    if (resetAction === \"full\") {\r\n      handleResetWhenBudgetExceeded();\r\n    } else {\r\n      handleClearCheckedItems();\r\n    }\r\n    setIsConfirmResetModalOpen(false);\r\n    setResetAction(null);\r\n  }, [resetAction, handleResetWhenBudgetExceeded, handleClearCheckedItems]);\r\n\r\n  // Maneja el cambio en el input del presupuesto con formateo en tiempo real\r\n  const handleBudgetChange = useCallback(\r\n    e => {\r\n      const rawValue = e.target.value;\r\n      const formattedValue = formatWhileTyping(rawValue);\r\n      setBudget(formattedValue);\r\n    },\r\n    [formatWhileTyping]\r\n  );\r\n\r\n  // Formatea el presupuesto al perder el foco\r\n  const handleBudgetBlur = useCallback(() => {\r\n    const numBudget = parsePrice(budget);\r\n    setBudget(isNaN(numBudget) ? \"\" : formatPrice(numBudget));\r\n  }, [budget, formatPrice, parsePrice]);\r\n\r\n  // ACTUALIZAR: Nuevo manejador para cambios en precios de productos\r\n  const handlePriceInputChange = useCallback(\r\n    (itemId, rawValue) => {\r\n      const formattedValue = formatWhileTyping(rawValue);\r\n\r\n      // Validar que shoppingItems sea un array\r\n      const validItems = Array.isArray(shoppingItems) ? shoppingItems : [];\r\n\r\n      // Actualizar inmediatamente en la UI con el valor formateado\r\n      const newItems = validItems.map(item => {\r\n        if (item.id !== itemId) return item;\r\n\r\n        // Guardar tanto el valor formateado (para mostrar) como el numérico (para cálculos)\r\n        const numericValue = parsePrice(formattedValue);\r\n        return {\r\n          ...item,\r\n          price: isNaN(numericValue) ? null : numericValue,\r\n          priceDisplay: formattedValue, // Nuevo campo temporal para mostrar\r\n        };\r\n      });\r\n\r\n      updateItems(newItems);\r\n    },\r\n    [shoppingItems, updateItems, formatWhileTyping, parsePrice]\r\n  );\r\n\r\n  // ACTUALIZAR: Maneja cuando se pierde el foco en un input de precio\r\n  const handlePriceInputBlur = useCallback(\r\n    itemId => {\r\n      // Validar que shoppingItems sea un array\r\n      const validItems = Array.isArray(shoppingItems) ? shoppingItems : [];\r\n\r\n      const newItems = validItems.map(item => {\r\n        if (item.id !== itemId) return item;\r\n\r\n        // Limpiar el campo temporal de display\r\n        const { priceDisplay, ...cleanItem } = item;\r\n        return cleanItem;\r\n      });\r\n\r\n      updateItems(newItems);\r\n    },\r\n    [shoppingItems, updateItems]\r\n  );\r\n\r\n  // Muestra un indicador de carga mientras se obtienen los datos\r\n  if (isLoadingShoppingList) {\r\n    return <div className=\"text-center p-4\">Cargando lista de compras...</div>;\r\n  }\r\n\r\n  // Muestra un mensaje de error si falla la carga\r\n  if (errorShoppingList) {\r\n    return (\r\n      <div className=\"text-center p-4 text-red-500\">\r\n        Error al cargar la lista: {errorShoppingList.message}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div\r\n      className=\"bg-white dark:bg-gradient-to-br dark:from-slate-900/80 dark:to-slate-800/60 p-3 sm:p-4 rounded-xl shadow-xl flex flex-col w-full backdrop-blur-sm border dark:border-slate-600/30\"\r\n      style={{ height: \"calc(100vh - 150px)\" }}\r\n    >\r\n      <h2 className=\"text-xl sm:text-2xl font-semibold text-emerald-700 dark:text-emerald-400 mb-3 flex items-center break-words\">\r\n        <ShoppingCart size={24} className=\"mr-2\" /> Mi Lista de Compras\r\n      </h2>\r\n      <div className=\"flex-grow overflow-y-auto pr-0.5 custom-scrollbar\">\r\n        {\" \"}\r\n        {/* Sección de Presupuesto */}\r\n        <div className=\"mb-4 p-4 bg-gradient-to-r from-blue-50 to-green-50 dark:from-slate-700/50 dark:to-slate-600/50 rounded-xl border border-blue-200 dark:border-slate-600 shadow-sm\">\r\n          <label\r\n            htmlFor=\"budget\"\r\n            className=\"block text-sm font-medium text-blue-700 dark:text-blue-300 mb-2\"\r\n          >\r\n            💰 Mi Presupuesto\r\n          </label>\r\n          <div className=\"flex items-center gap-3\">\r\n            <input\r\n              type=\"text\"\r\n              id=\"budget\"\r\n              placeholder=\"Ej: 500.000\"\r\n              value={budget}\r\n              onChange={handleBudgetChange}\r\n              onBlur={handleBudgetBlur}\r\n              className=\"flex-1 p-3 rounded-lg border-2 border-blue-200 dark:border-blue-400/30 bg-white dark:bg-gradient-to-br dark:from-slate-800/50 dark:to-slate-700/30 text-slate-900 dark:text-slate-100 placeholder-slate-500 dark:placeholder-slate-400 focus:ring-2 focus:ring-blue-400 focus:border-blue-400 dark:focus:border-blue-400 dark:focus:ring-blue-400/50 transition-all duration-200 shadow-sm backdrop-blur-sm\"\r\n            />\r\n            <button\r\n              onClick={async () => {\r\n                // Guarda el presupuesto en localStorage y actualiza settings\r\n                try {\r\n                  const newSettings = await getLocalShoppingSettings();\r\n                  newSettings.budget = budget;\r\n                  await updateSettings(newSettings);\r\n                  showToast && showToast(\"Presupuesto guardado.\", \"success\");\r\n                } catch (error) {\r\n                  log.error(\"Error guardando presupuesto:\", error);\r\n                  showToast &&\r\n                    showToast(\"Error al guardar presupuesto.\", \"error\");\r\n                }\r\n              }}\r\n              className=\"px-4 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-all duration-200 font-medium shadow-sm\"\r\n            >\r\n              💾 Guardar\r\n            </button>\r\n          </div>\r\n        </div>{\" \"}\r\n        {/* Formulario para añadir nuevo producto */}\r\n        <form\r\n          onSubmit={handleAddItem}\r\n          className=\"mb-4 p-4 bg-gradient-to-r from-emerald-50 to-green-50 dark:from-slate-700/50 dark:to-slate-600/50 rounded-xl border border-emerald-200 dark:border-slate-600 shadow-sm\"\r\n        >\r\n          <div className=\"grid grid-cols-1 sm:grid-cols-3 gap-3\">\r\n            <div className=\"sm:col-span-2\">\r\n              <label\r\n                htmlFor=\"newItemName\"\r\n                className=\"block text-sm font-medium text-emerald-700 dark:text-emerald-300 mb-1\"\r\n              >\r\n                🛒 Producto\r\n              </label>\r\n              <input\r\n                type=\"text\"\r\n                id=\"newItemName\"\r\n                placeholder=\"Ej: Leche descremada\"\r\n                value={newItemName}\r\n                onChange={e => setNewItemName(e.target.value)}\r\n                className=\"w-full p-3 rounded-lg border-2 border-emerald-200 dark:border-emerald-400/30 bg-white dark:bg-gradient-to-br dark:from-slate-800/50 dark:to-slate-700/30 text-slate-900 dark:text-slate-100 placeholder-slate-500 dark:placeholder-slate-400 focus:ring-2 focus:ring-emerald-400 focus:border-emerald-400 dark:focus:border-emerald-400 dark:focus:ring-emerald-400/50 transition-all duration-200 shadow-sm backdrop-blur-sm\"\r\n              />\r\n            </div>\r\n            <div>\r\n              <label\r\n                htmlFor=\"newItemCategory\"\r\n                className=\"block text-sm font-medium text-emerald-700 dark:text-emerald-300 mb-1\"\r\n              >\r\n                🏷️ Categoría\r\n              </label>\r\n              <select\r\n                id=\"newItemCategory\"\r\n                value={newItemCategory}\r\n                onChange={e => setNewItemCategory(e.target.value)}\r\n                className=\"w-full p-3 rounded-lg border-2 border-emerald-200 dark:border-emerald-400/30 bg-white dark:bg-gradient-to-br dark:from-slate-800/50 dark:to-slate-700/30 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-emerald-400 focus:border-emerald-400 dark:focus:border-emerald-400 dark:focus:ring-emerald-400/50 transition-all duration-200 shadow-sm backdrop-blur-sm\"\r\n              >\r\n                {allShoppingCategories.map(cat => (\r\n                  <option key={cat} value={cat}>\r\n                    {cat}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n          </div>\r\n          <div className=\"flex justify-end mt-3\">\r\n            <button\r\n              type=\"submit\"\r\n              className=\"px-6 py-2.5 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 focus:ring-2 focus:ring-emerald-500 focus:ring-offset-2 transition-all duration-200 font-medium shadow-sm flex items-center\"\r\n            >\r\n              <PlusCircle size={18} className=\"mr-2\" /> ✅ Añadir Producto\r\n            </button>\r\n          </div>\r\n        </form>{\" \"}\r\n        {/* Sección para añadir/gestionar categorías personalizadas */}\r\n        <div className=\"mb-4 p-4 bg-gradient-to-r from-sky-50 to-indigo-50 dark:from-slate-700/50 dark:to-slate-600/50 rounded-xl border border-sky-200 dark:border-slate-600 shadow-sm\">\r\n          <div className=\"flex items-center gap-3 mb-3\">\r\n            <div className=\"flex-1\">\r\n              <label className=\"block text-sm font-medium text-sky-700 dark:text-sky-300 mb-1\">\r\n                🏷️ Nueva Categoría\r\n              </label>\r\n              <input\r\n                type=\"text\"\r\n                placeholder=\"Ej: Productos orgánicos\"\r\n                value={newCustomCategory}\r\n                onChange={e => setNewCustomCategory(e.target.value)}\r\n                className=\"w-full p-3 rounded-lg border-2 border-sky-200 dark:border-sky-400/30 bg-white dark:bg-gradient-to-br dark:from-slate-800/50 dark:to-slate-700/30 text-slate-900 dark:text-slate-100 placeholder-slate-500 dark:placeholder-slate-400 focus:ring-2 focus:ring-sky-400 focus:border-sky-400 dark:focus:border-sky-400 dark:focus:ring-sky-400/50 transition-all duration-200 shadow-sm backdrop-blur-sm\"\r\n              />\r\n            </div>\r\n            <button\r\n              onClick={handleAddCustomCategory}\r\n              className=\"px-4 py-2.5 bg-sky-600 text-white rounded-lg hover:bg-sky-700 focus:ring-2 focus:ring-sky-500 focus:ring-offset-2 transition-all duration-200 font-medium shadow-sm flex items-center self-end\"\r\n            >\r\n              <Tag size={16} className=\"mr-1\" /> ➕ Añadir\r\n            </button>\r\n          </div>{\" \"}\r\n          {userShoppingCategories.filter(\r\n            cat => !DEFAULT_SHOPPING_CATEGORIES.includes(cat)\r\n          ).length > 0 && (\r\n            <div className=\"border-t border-sky-200 dark:border-slate-600 pt-3\">\r\n              <span className=\"text-sm font-medium text-sky-700 dark:text-sky-300 mb-2 block\">\r\n                🏷️ Mis Categorías Personalizadas:\r\n              </span>\r\n              <div className=\"flex flex-wrap gap-2\">\r\n                {userShoppingCategories\r\n                  .filter(cat => !DEFAULT_SHOPPING_CATEGORIES.includes(cat))\r\n                  .map(cat => (\r\n                    <span\r\n                      key={cat}\r\n                      className=\"bg-sky-100 dark:bg-sky-800 border border-sky-200 dark:border-sky-600 px-3 py-1.5 rounded-full flex items-center text-sm text-sky-800 dark:text-sky-200 shadow-sm\"\r\n                    >\r\n                      {cat}\r\n                      <button\r\n                        onClick={() => handleDeleteCustomCategory(cat)}\r\n                        className=\"ml-2 text-red-500 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-800 transition-colors\"\r\n                        title={`Eliminar categoría ${cat}`}\r\n                      >\r\n                        <X size={12} />\r\n                      </button>\r\n                    </span>\r\n                  ))}\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n        {/* Filtro por categoría */}\r\n        <div className=\"mb-4 p-4 bg-gradient-to-r from-purple-50 to-pink-50 dark:from-slate-700/50 dark:to-slate-600/50 rounded-xl border border-purple-200 dark:border-slate-600 shadow-sm\">\r\n          <label className=\"block text-sm font-medium text-purple-700 dark:text-purple-300 mb-2\">\r\n            🎯 Filtrar por Categoría\r\n          </label>\r\n          <div className=\"flex items-center gap-3\">\r\n            <select\r\n              value={selectedCategoryFilter}\r\n              onChange={e => setSelectedCategoryFilter(e.target.value)}\r\n              className=\"flex-1 p-3 rounded-lg border-2 border-purple-200 dark:border-purple-400/30 bg-white dark:bg-gradient-to-br dark:from-slate-800/50 dark:to-slate-700/30 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-purple-400 focus:border-purple-400 dark:focus:border-purple-400 dark:focus:ring-purple-400/50 transition-all duration-200 shadow-sm backdrop-blur-sm\"\r\n            >\r\n              <option value=\"Todas las categorías\">Todas las categorías</option>\r\n              {allShoppingCategories.map(cat => (\r\n                <option key={cat} value={cat}>\r\n                  {cat}\r\n                </option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n        </div>\r\n        {/* Lista de productos agrupados por categoría */}\r\n        <div className=\"space-y-2 pb-4\">\r\n          {Object.keys(groupedItems).length > 0 ? (\r\n            Object.entries(groupedItems).map(\r\n              ([category, items]) =>\r\n                items.length > 0 && (\r\n                  <div key={category}>\r\n                    <h3 className=\"text-md font-semibold text-emerald-600 dark:text-emerald-400 mb-1.5 border-b pb-1 border-slate-200 dark:border-slate-700\">\r\n                      {category}\r\n                    </h3>\r\n                    <ul className=\"space-y-1.5\">\r\n                      {items.map(item => (\r\n                        <li\r\n                          key={item.id}\r\n                          className={`flex items-center bg-gradient-to-r from-emerald-50 to-blue-50 dark:bg-gradient-to-br dark:from-slate-800/60 dark:to-slate-700/40 p-2 rounded-lg shadow-sm border-2 border-emerald-200 dark:border-emerald-400/30 transition-all duration-200 hover:shadow-md backdrop-blur-sm ${\r\n                            item.checked ? \"opacity-60\" : \"\"\r\n                          }`}\r\n                        >\r\n                          {/* Checkbox para \"toBuy\" (seleccionar para comprar) */}{\" \"}\r\n                          <input\r\n                            type=\"checkbox\"\r\n                            checked={item.toBuy || false}\r\n                            onChange={e =>\r\n                              handleUpdateItem(\r\n                                item.id,\r\n                                \"toBuy\",\r\n                                e.target.checked\r\n                              )\r\n                            }\r\n                            className=\"h-5 w-5 rounded-md appearance-none border-2 border-blue-300 dark:border-blue-400/50 bg-gradient-to-br from-blue-50 to-white dark:from-slate-800/80 dark:to-slate-700/60 checked:bg-gradient-to-br checked:from-blue-500 checked:to-blue-600 dark:checked:from-blue-400 dark:checked:to-blue-500 checked:border-blue-600 dark:checked:border-blue-400 focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400/50 focus:ring-offset-1 mr-2 flex-shrink-0 transition-all duration-200 cursor-pointer relative checked:after:content-['✓'] checked:after:absolute checked:after:inset-0 checked:after:flex checked:after:items-center checked:after:justify-center checked:after:text-white checked:after:text-sm checked:after:font-bold checked:after:drop-shadow-sm\"\r\n                            title=\"Seleccionar para comprar\"\r\n                          />\r\n                          {/* Nombre del producto */}\r\n                          <span\r\n                            className={`flex-grow text-sm transition-colors font-semibold ${\r\n                              item.checked\r\n                                ? \"line-through text-red-600 dark:text-red-400\"\r\n                                : \"text-slate-700 dark:text-slate-100\"\r\n                            }`}\r\n                          >\r\n                            {item.name}\r\n                          </span>\r\n                          {/* Controles de cantidad y precio */}\r\n                          <div className=\"flex items-center space-x-1 ml-1.5 text-xs\">\r\n                            {/* Botón para disminuir cantidad */}\r\n                            <button\r\n                              onClick={() =>\r\n                                handleUpdateItem(\r\n                                  item.id,\r\n                                  \"quantity\",\r\n                                  Math.max(1, (Number(item.quantity) || 1) - 1)\r\n                                )\r\n                              }\r\n                              className=\"p-0.5 text-slate-500 dark:text-white hover:text-red-500 dark:hover:text-red-400 rounded-full\"\r\n                              aria-label=\"Disminuir cantidad\"\r\n                            >\r\n                              <Minus size={14} />\r\n                            </button>\r\n                            <span className=\"w-4 text-center text-slate-700 dark:text-white\">\r\n                              {item.quantity || 1}\r\n                            </span>\r\n                            {/* Botón para aumentar cantidad */}\r\n                            <button\r\n                              onClick={() =>\r\n                                handleUpdateItem(\r\n                                  item.id,\r\n                                  \"quantity\",\r\n                                  (Number(item.quantity) || 1) + 1\r\n                                )\r\n                              }\r\n                              className=\"p-0.5 text-slate-500 dark:text-white hover:text-green-500 dark:hover:text-green-400 rounded-full\"\r\n                              aria-label=\"Aumentar cantidad\"\r\n                            >\r\n                              <Plus size={14} />\r\n                            </button>{\" \"}\r\n                            {/* ACTUALIZAR: Input para precio unitario con formateo en tiempo real */}\r\n                            <input\r\n                              type=\"text\"\r\n                              placeholder=\"Precio\"\r\n                              title=\"Precio Unitario\"\r\n                              value={\r\n                                item.priceDisplay !== undefined\r\n                                  ? item.priceDisplay\r\n                                  : item.price !== null\r\n                                    ? formatPrice(item.price)\r\n                                    : \"\"\r\n                              }\r\n                              onChange={e =>\r\n                                handlePriceInputChange(item.id, e.target.value)\r\n                              }\r\n                              onBlur={() => handlePriceInputBlur(item.id)}\r\n                              className=\"w-16 p-1 rounded-md border-2 border-emerald-300 dark:border-emerald-400/30 bg-white dark:bg-gradient-to-br dark:from-slate-800/50 dark:to-slate-700/30 dark:text-slate-100 text-right text-xs focus:ring-2 focus:ring-emerald-400 dark:focus:ring-emerald-400/50 transition-all duration-200 backdrop-blur-sm\"\r\n                            />\r\n                            {/* Input de solo lectura para el total del artículo con formato */}\r\n                            <input\r\n                              type=\"text\"\r\n                              readOnly\r\n                              value={\r\n                                item.price && item.price > 0\r\n                                  ? formatPrice(\r\n                                      (item.price || 0) * (item.quantity || 1)\r\n                                    )\r\n                                  : \"\"\r\n                              }\r\n                              className=\"w-20 p-1 rounded-md border-2 border-blue-300 dark:border-blue-400/30 bg-white dark:bg-gradient-to-br dark:from-slate-800/50 dark:to-slate-700/30 dark:text-slate-100 text-right text-xs focus:ring-2 focus:ring-blue-400 dark:focus:ring-blue-400/50 transition-all duration-200 backdrop-blur-sm\"\r\n                              title=\"Total Artículo\"\r\n                            />\r\n                            {/* Checkbox para \"checked\" (marcar como comprado) */}{\" \"}\r\n                            <input\r\n                              type=\"checkbox\"\r\n                              checked={item.checked || false}\r\n                              onChange={e =>\r\n                                handleUpdateItem(\r\n                                  item.id,\r\n                                  \"checked\",\r\n                                  e.target.checked\r\n                                )\r\n                              }\r\n                              className=\"h-5 w-5 rounded-md appearance-none border-2 border-emerald-300 dark:border-emerald-400/50 bg-gradient-to-br from-emerald-50 to-white dark:from-slate-800/80 dark:to-slate-700/60 checked:bg-gradient-to-br checked:from-emerald-500 checked:to-emerald-600 dark:checked:from-emerald-400 dark:checked:to-emerald-500 checked:border-emerald-600 dark:checked:border-emerald-400 focus:ring-2 focus:ring-emerald-500 dark:focus:ring-emerald-400/50 focus:ring-offset-1 ml-2 flex-shrink-0 transition-all duration-200 cursor-pointer relative checked:after:content-['✓'] checked:after:absolute checked:after:inset-0 checked:after:flex checked:after:items-center checked:after:justify-center checked:after:text-white checked:after:text-sm checked:after:font-bold checked:after:drop-shadow-sm\"\r\n                              title=\"Marcar como comprado\"\r\n                            />\r\n                            {/* Botón para eliminar ítem */}\r\n                            <button\r\n                              onClick={() => confirmDeleteItem(item.id)}\r\n                              className=\"p-1 text-red-500 dark:text-red-400 hover:text-red-700 dark:hover:text-red-300 rounded-full\"\r\n                              aria-label=\"Eliminar producto\"\r\n                            >\r\n                              <Trash2 size={16} />\r\n                            </button>\r\n                          </div>\r\n                        </li>\r\n                      ))}\r\n                    </ul>\r\n                  </div>\r\n                )\r\n            )\r\n          ) : (\r\n            <div className=\"text-center py-8 text-slate-500 dark:text-slate-400 text-sm\">\r\n              Tu lista está vacía.\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n      {/* Pie de página con resumen de costos y botón de restablecer */}\r\n      <div className=\"mt-auto pt-3 border-t border-slate-200 dark:border-slate-600/50 bg-white dark:bg-gradient-to-r dark:from-slate-900/70 dark:to-slate-800/50 pb-1 rounded-b-xl backdrop-blur-sm\">\r\n        <div className=\"flex flex-col sm:flex-row justify-between items-center gap-2\">\r\n          <div className=\"text-center sm:text-left\">\r\n            <div className=\"text-md sm:text-lg font-semibold text-emerald-800 dark:text-emerald-300\">\r\n              Total Compra: ${totalCost > 0 ? formatPrice(totalCost) : \"0\"}\r\n            </div>\r\n            {/* CORRECCIÓN: Usar numericBudget > 0 en lugar de solo 'budget' para mostrar el restante solo si hay un presupuesto válido */}\r\n            {numericBudget > 0 && (\r\n              <div\r\n                className={`text-xs font-medium ${\r\n                  remainingBudget < 0\r\n                    ? \"text-red-500 dark:text-red-400\"\r\n                    : \"text-green-600 dark:text-green-400\"\r\n                }`}\r\n              >\r\n                Presupuesto Restante: ${formatPrice(Math.abs(remainingBudget))}\r\n                {remainingBudget < 0 && \" (Excedido)\"}\r\n              </div>\r\n            )}\r\n          </div>{\" \"}\r\n          {/* Botón para restablecer - comportamiento condicional */}\r\n          <button\r\n            onClick={confirmReset}\r\n            disabled={\r\n              remainingBudget < 0\r\n                ? false // Siempre habilitado cuando el presupuesto está excedido\r\n                : !Array.isArray(shoppingItems) ||\r\n                  shoppingItems.every(item => !item.checked && !item.toBuy)\r\n            }\r\n            className=\"px-3 py-1.5 bg-orange-500 text-white rounded-lg shadow-md hover:bg-orange-600 disabled:opacity-50 flex items-center justify-center font-medium text-xs w-full sm:w-auto whitespace-nowrap\"\r\n            title={\r\n              remainingBudget < 0\r\n                ? \"Restablecer todo debido a presupuesto excedido\"\r\n                : \"Limpiar items marcados como comprados\"\r\n            }\r\n          >\r\n            <RotateCcw size={14} className=\"mr-1\" />\r\n            {remainingBudget < 0 ? \"Restablecer Todo\" : \"Restablecer\"}\r\n          </button>\r\n        </div>\r\n      </div>{\" \"}\r\n      {/* Modal de confirmación para eliminar un ítem */}\r\n      <CustomConfirmModal\r\n        isOpen={isConfirmDeleteItemModalOpen}\r\n        onClose={() => setIsConfirmDeleteItemModalOpen(false)}\r\n        onConfirm={handleDeleteItem}\r\n        title=\"🗑️ Confirmar Eliminación\"\r\n        message=\"¿Seguro que quieres eliminar este producto de la lista de compras?\"\r\n      />\r\n      {/* Modal de confirmación para restablecer */}\r\n      <CustomConfirmModal\r\n        isOpen={isConfirmResetModalOpen}\r\n        onClose={() => {\r\n          setIsConfirmResetModalOpen(false);\r\n          setResetAction(null);\r\n        }}\r\n        onConfirm={executeReset}\r\n        title={\r\n          resetAction === \"full\"\r\n            ? \"🔄 Restablecer Todo\"\r\n            : \"🔄 Restablecer Lista\"\r\n        }\r\n        message={\r\n          resetAction === \"full\"\r\n            ? \"⚠️ Presupuesto excedido detectado.\\n\\nEsta acción restablecerá COMPLETAMENTE la lista:\\n• Eliminará todos los precios\\n• Restablecerá cantidades a 1\\n• Desmarcará todos los productos\\n• Limpiará el presupuesto\\n\\n¿Deseas continuar?\"\r\n            : \"Esta acción eliminará todos los productos marcados como comprados y desmarcará los productos seleccionados para comprar.\\n\\n¿Deseas continuar?\"\r\n        }\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\n// Memoización de ShoppingList para evitar renders innecesarios\r\nexport default React.memo(ShoppingList);\r\n","/**\r\n * @fileoverview Constantes centralizadas para la aplicación Recetario Mágico\r\n * Define categorías, traducciones, configuraciones y datos por defecto\r\n * Optimizado para rendimiento y mantenibilidad\r\n * @author Sistema de gestión de recetas\r\n * @version 2.0.0\r\n */\r\n\r\n/**\r\n * Categorías de recetas disponibles en la aplicación\r\n * Incluyen emojis para mejor representación visual y UX\r\n * Frozen para prevenir mutaciones accidentales y mejorar rendimiento\r\n */\r\nexport const RECIPE_CATEGORIES = Object.freeze([\r\n  \"Desayuno 🥐\",\r\n  \"Almuerzo 🥗\",\r\n  \"Cena 🍝\",\r\n  \"Postre 🍰\",\r\n  \"Snack 🍿\",\r\n  \"Bebida 🍹\",\r\n  \"Otro ✨\",\r\n]);\r\n\r\n/**\r\n * Configuración de días de la semana\r\n * Utilizados para el planificador semanal\r\n * Frozen para prevenir mutaciones y mejorar rendimiento\r\n */\r\nexport const DAYS_OF_WEEK = Object.freeze([\r\n  \"lunes\",\r\n  \"martes\",\r\n  \"miercoles\",\r\n  \"jueves\",\r\n  \"viernes\",\r\n  \"sabado\",\r\n  \"domingo\",\r\n]);\r\n\r\n/**\r\n * Traducciones de días de la semana con acentuación correcta\r\n * Mapea claves internas a nombres mostrados al usuario\r\n * Frozen para prevenir mutaciones y optimizar acceso\r\n */\r\nexport const DAY_TRANSLATIONS = Object.freeze({\r\n  lunes: \"Lunes\",\r\n  martes: \"Martes\",\r\n  miercoles: \"Miércoles\",\r\n  jueves: \"Jueves\",\r\n  viernes: \"Viernes\",\r\n  sabado: \"Sábado\",\r\n  domingo: \"Domingo\",\r\n});\r\n\r\n/**\r\n * Categorías por defecto para la lista de compras\r\n * Organizadas por tipo de producto/sección del supermercado\r\n * Frozen para prevenir mutaciones accidentales\r\n */\r\nexport const DEFAULT_SHOPPING_CATEGORIES = Object.freeze([\r\n  \"Supermercado\",\r\n  \"Lácteos\",\r\n  \"Carnes\",\r\n  \"Verduras y Frutas\",\r\n  \"Aseo\",\r\n  \"Otros\",\r\n]);\r\n\r\n/**\r\n * Enlaces optimizados a sitios web de recetas online\r\n * Incluye sitios populares en español con iconos representativos\r\n * Frozen para prevenir mutaciones y mejorar rendimiento de rendering\r\n */\r\nexport const ONLINE_RECIPE_LINKS = Object.freeze([\r\n  Object.freeze({\r\n    id: \"directo-paladar\",\r\n    name: \"Directo al Paladar\",\r\n    url: \"https://www.directoalpaladar.com/recetas\",\r\n    icon: \"🍲\",\r\n    description: \"Blog gastronómico con recetas tradicionales y modernas\",\r\n  }),\r\n  Object.freeze({\r\n    id: \"elpais-recetas\",\r\n    name: \"Recetas de Cocina (El País)\",\r\n    url: \"https://elpais.com/elpais/recetas/\",\r\n    icon: \"📰\",\r\n    description: \"Sección de recetas del diario El País\",\r\n  }),\r\n  Object.freeze({\r\n    id: \"gastronomia-cia\",\r\n    name: \"Gastronomía & Cía\",\r\n    url: \"https://www.gastronomiaycia.com/recetas/\",\r\n    icon: \"🧑‍🍳\",\r\n    description: \"Portal especializado en gastronomía y técnicas culinarias\",\r\n  }),\r\n  Object.freeze({\r\n    id: \"bon-viveur\",\r\n    name: \"Bon Viveur\",\r\n    url: \"https://www.bonviveur.es/recetas\",\r\n    icon: \"🍷\",\r\n    description: \"Recetas gourmet y maridajes\",\r\n  }),\r\n  Object.freeze({\r\n    id: \"divina-cocina\",\r\n    name: \"Divina Cocina\",\r\n    url: \"https://www.divinacocina.es/recetas/\",\r\n    icon: \"🌟\",\r\n    description: \"Recetas caseras y tradicionales\",\r\n  }),\r\n  Object.freeze({\r\n    id: \"recetas-gratis\",\r\n    name: \"Recetas Gratis\",\r\n    url: \"https://www.recetasgratis.net/\",\r\n    icon: \"🆓\",\r\n    description: \"Amplio catálogo de recetas gratuitas\",\r\n  }),\r\n]);\r\n\r\n/**\r\n * Configuración centralizada de la aplicación\r\n * Valores por defecto y configuraciones globales optimizadas\r\n * Frozen para prevenir mutaciones accidentales\r\n */\r\nexport const APP_CONFIG = Object.freeze({\r\n  // Configuración de notificaciones\r\n  TOAST: Object.freeze({\r\n    DURATION: 2500,\r\n    POSITION: \"top-right\",\r\n    MAX_VISIBLE: 3,\r\n  }),\r\n\r\n  // Configuración de localStorage optimizada\r\n  STORAGE: Object.freeze({\r\n    PREFIX: \"recetario_\",\r\n    VERSION: \"v2.0\",\r\n    KEYS: Object.freeze({\r\n      RECIPES: \"recipes\",\r\n      SHOPPING_LIST: \"shoppingList\",\r\n      WEEKLY_PLAN: \"weeklyPlan\",\r\n      THEME: \"theme\",\r\n      USER_CATEGORIES: \"userCategories\",\r\n      SHOPPING_CATEGORIES: \"shoppingCategories\",\r\n    }),\r\n  }),\r\n\r\n  // Configuración de rendimiento\r\n  PERFORMANCE: Object.freeze({\r\n    AUTO_SAVE_DELAY: 500,\r\n    DEBOUNCE_DELAY: 300,\r\n    SEARCH_DELAY: 200,\r\n    IMAGE_LAZY_THRESHOLD: \"200px\",\r\n  }),\r\n\r\n  // Límites de la aplicación para prevenir problemas de memoria\r\n  LIMITS: Object.freeze({\r\n    MAX_RECIPES: 1000,\r\n    MAX_SHOPPING_ITEMS: 500,\r\n    MAX_CUSTOM_CATEGORIES: 20,\r\n    MAX_RECIPE_NAME_LENGTH: 100,\r\n    MAX_INGREDIENT_LENGTH: 200,\r\n    MAX_INSTRUCTION_LENGTH: 500,\r\n  }),\r\n\r\n  // Configuración de formato de fecha y tiempo optimizada\r\n  LOCALE: Object.freeze({\r\n    DATE_FORMAT: \"es-ES\",\r\n    DATE_OPTIONS: Object.freeze({\r\n      weekday: \"long\",\r\n      year: \"numeric\",\r\n      month: \"long\",\r\n      day: \"numeric\",\r\n    }),\r\n    TIME_FORMAT: \"es-ES\",\r\n    TIME_OPTIONS: Object.freeze({\r\n      hour: \"2-digit\",\r\n      minute: \"2-digit\",\r\n      hour12: false,\r\n    }),\r\n    CURRENCY_FORMAT: \"es-ES\",\r\n    CURRENCY_OPTIONS: Object.freeze({\r\n      style: \"currency\",\r\n      currency: \"COP\",\r\n      minimumFractionDigits: 0,\r\n      maximumFractionDigits: 0,\r\n    }),\r\n  }),\r\n});\r\n\r\n/**\r\n * Tipos de notificaciones disponibles\r\n * Enum-like object para type safety y autocompletado\r\n */\r\nexport const TOAST_TYPES = Object.freeze({\r\n  SUCCESS: \"success\",\r\n  ERROR: \"error\",\r\n  WARNING: \"warning\",\r\n  INFO: \"info\",\r\n});\r\n\r\n/**\r\n * Estados de carga de la aplicación\r\n * Enum-like object para consistencia en manejo de estados\r\n */\r\nexport const LOADING_STATES = Object.freeze({\r\n  IDLE: \"idle\",\r\n  LOADING: \"loading\",\r\n  SUCCESS: \"success\",\r\n  ERROR: \"error\",\r\n});\r\n\r\n/**\r\n * Temas disponibles para la aplicación\r\n * Enum-like object para consistencia en manejo de temas\r\n */\r\nexport const THEMES = Object.freeze({\r\n  LIGHT: \"light\",\r\n  DARK: \"dark\",\r\n  SYSTEM: \"system\",\r\n});\r\n\r\n/**\r\n * Configuración de validaciones para formularios\r\n * Reglas centralizadas para validación de datos\r\n */\r\nexport const VALIDATION_RULES = Object.freeze({\r\n  RECIPE: Object.freeze({\r\n    NAME: Object.freeze({\r\n      MIN_LENGTH: 2,\r\n      MAX_LENGTH: 100,\r\n      REQUIRED: true,\r\n    }),\r\n    PREP_TIME: Object.freeze({\r\n      MIN: 1,\r\n      MAX: 1440, // 24 horas en minutos\r\n      PATTERN: /^\\d+\\s?(min|mins|minutos?|h|hr|hrs|horas?)?$/i,\r\n    }),\r\n    SERVINGS: Object.freeze({\r\n      MIN: 1,\r\n      MAX: 50,\r\n    }),\r\n  }),\r\n  SHOPPING_ITEM: Object.freeze({\r\n    NAME: Object.freeze({\r\n      MIN_LENGTH: 1,\r\n      MAX_LENGTH: 100,\r\n      REQUIRED: true,\r\n    }),\r\n    QUANTITY: Object.freeze({\r\n      MIN: 1,\r\n      MAX: 999,\r\n    }),\r\n    PRICE: Object.freeze({\r\n      MIN: 0,\r\n      MAX: 999999999,\r\n    }),\r\n  }),\r\n});\r\n\r\n/**\r\n * Configuración de URLs y endpoints\r\n * Centralizadas para fácil mantenimiento\r\n */\r\nexport const URLS = Object.freeze({\r\n  PLACEHOLDER_IMAGE: \"https://placehold.co/600x300/E2E8F0/A0AEC0\",\r\n  GITHUB_REPO: \"https://github.com/tu-usuario/recetario-app\",\r\n  DOCUMENTATION: \"https://docs.recetario-app.com\",\r\n});\r\n\r\n/**\r\n * Configuración de animaciones CSS\r\n * Duraciones estándar para consistencia visual\r\n */\r\nexport const ANIMATIONS = Object.freeze({\r\n  FAST: \"150ms\",\r\n  NORMAL: \"200ms\",\r\n  SLOW: \"300ms\",\r\n  EASING: Object.freeze({\r\n    EASE_IN_OUT: \"cubic-bezier(0.4, 0, 0.2, 1)\",\r\n    EASE_OUT: \"cubic-bezier(0, 0, 0.2, 1)\",\r\n    EASE_IN: \"cubic-bezier(0.4, 0, 1, 1)\",\r\n  }),\r\n});\r\n\r\n// =============================================================================\r\n// COMPUTED CONSTANTS - Valores derivados para optimización\r\n// =============================================================================\r\n\r\n/**\r\n * Map optimizado de traducciones de días para acceso O(1)\r\n * Utiliza Map para mejor rendimiento en búsquedas frecuentes\r\n */\r\nexport const DAY_TRANSLATIONS_MAP = new Map(Object.entries(DAY_TRANSLATIONS));\r\n\r\n/**\r\n * Set optimizado de categorías de recetas para validación O(1)\r\n * Útil para verificar si una categoría es válida\r\n */\r\nexport const RECIPE_CATEGORIES_SET = new Set(RECIPE_CATEGORIES);\r\n\r\n/**\r\n * Map optimizado de enlaces de recetas por ID para acceso directo\r\n * Evita búsquedas lineales en el array\r\n */\r\nexport const RECIPE_LINKS_MAP = new Map(\r\n  ONLINE_RECIPE_LINKS.map((link) => [link.id, link])\r\n);\r\n\r\n// =============================================================================\r\n// DEPRECATED - Mantenidos para compatibilidad hacia atrás\r\n// =============================================================================\r\n\r\n/**\r\n * @deprecated Usar RECIPE_CATEGORIES en su lugar\r\n * Mantenido para compatibilidad con código existente\r\n */\r\nexport const CATEGORIES = RECIPE_CATEGORIES;\r\n\r\n/**\r\n * @deprecated Usar DEFAULT_SHOPPING_CATEGORIES en su lugar\r\n * Mantenido para compatibilidad con código existente\r\n */\r\nexport const SHOPPING_CATEGORIES = DEFAULT_SHOPPING_CATEGORIES;\r\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Plus\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNNSAxMmgxNCIgLz4KICA8cGF0aCBkPSJNMTIgNXYxNCIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/plus\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Plus = createLucideIcon('Plus', [\n  ['path', { d: 'M5 12h14', key: '1ays0h' }],\n  ['path', { d: 'M12 5v14', key: 's699le' }],\n]);\n\nexport default Plus;\n","import React, { useCallback, useEffect } from \"react\";\r\nimport { X } from \"lucide-react\";\r\n\r\n/**\r\n * Modal\r\n * Componente modal genérico y reutilizable optimizado.\r\n * Muestra contenido en una ventana emergente centrada con funcionalidades avanzadas.\r\n *\r\n * Características:\r\n * - Renderizado condicional optimizado\r\n * - Manejo de teclado (Escape para cerrar)\r\n * - Prevención de scroll del body cuando está abierto\r\n * - Cierre al hacer clic en el overlay\r\n * - Accesibilidad mejorada con ARIA\r\n * - Animaciones suaves\r\n *\r\n * @param {Object} props - Propiedades del componente\r\n * @param {boolean} props.isOpen - Controla la visibilidad del modal\r\n * @param {Function} props.onClose - Función para cerrar el modal\r\n * @param {string} props.title - Título mostrado en el encabezado\r\n * @param {React.ReactNode} props.children - Contenido del modal\r\n * @param {Function} [props.onKeyDown] - Manejador adicional de teclas (opcional)\r\n * @returns {JSX.Element|null} El componente modal o null si está cerrado\r\n */\r\nconst Modal = ({ isOpen, onClose, title, children, onKeyDown }) => {\r\n  // Manejador optimizado para cerrar el modal\r\n  const handleClose = useCallback(() => {\r\n    if (onClose) {\r\n      onClose();\r\n    }\r\n  }, [onClose]);\r\n\r\n  // Manejador para cerrar al hacer clic en el overlay\r\n  const handleOverlayClick = useCallback(\r\n    event => {\r\n      // Solo cierra si se hace clic directamente en el overlay, no en el contenido\r\n      if (event.target === event.currentTarget) {\r\n        handleClose();\r\n      }\r\n    },\r\n    [handleClose]\r\n  );\r\n\r\n  // Manejador de teclado para accesibilidad\r\n  const handleKeyDown = useCallback(\r\n    event => {\r\n      // Maneja la tecla Escape para cerrar el modal\r\n      if (event.key === \"Escape\") {\r\n        handleClose();\r\n      }\r\n\r\n      // Ejecuta manejador adicional si se proporciona\r\n      if (onKeyDown) {\r\n        onKeyDown(event);\r\n      }\r\n    },\r\n    [handleClose, onKeyDown]\r\n  );\r\n  // Efecto para manejar el scroll del body y eventos de teclado\r\n  useEffect(() => {\r\n    if (isOpen) {\r\n      // Guarda el estado actual del overflow del body\r\n      const originalOverflow = document.body.style.overflow;\r\n\r\n      // Previene el scroll del body cuando el modal está abierto\r\n      document.body.style.overflow = \"hidden\";\r\n\r\n      // Añade listener para el teclado\r\n      document.addEventListener(\"keydown\", handleKeyDown);\r\n\r\n      // Función de limpieza que restaura el estado original\r\n      return () => {\r\n        document.body.style.overflow = originalOverflow || \"auto\";\r\n        document.removeEventListener(\"keydown\", handleKeyDown);\r\n      };\r\n    } else {\r\n      // Asegura que el scroll esté habilitado cuando el modal no está abierto\r\n      document.body.style.overflow = \"auto\";\r\n    }\r\n  }, [isOpen, handleKeyDown]);\r\n\r\n  // Renderizado condicional optimizado\r\n  if (!isOpen) return null;\r\n  return (\r\n    // Overlay principal con backdrop blur y centrado\r\n    <div\r\n      className=\"fixed inset-0 bg-black bg-opacity-70 backdrop-blur-sm flex justify-center items-center z-50 p-4 animate-in fade-in duration-200\"\r\n      onClick={handleOverlayClick}\r\n      role=\"dialog\"\r\n      aria-modal=\"true\"\r\n      aria-labelledby=\"modal-title\"\r\n      aria-describedby=\"modal-content\"\r\n    >\r\n      {\" \"}\r\n      {/* Contenedor del modal con animación de entrada y scroll mejorado */}\r\n      <div className=\"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-lg max-h-[90vh] min-h-0 flex flex-col animate-in zoom-in-95 duration-200 overflow-hidden\">\r\n        {/* Encabezado del modal - fijo en la parte superior */}\r\n        <header className=\"flex justify-between items-center p-6 pb-4 border-b border-slate-200 dark:border-slate-600 flex-shrink-0\">\r\n          <h2\r\n            id=\"modal-title\"\r\n            className=\"text-2xl font-bold text-emerald-700 dark:text-emerald-400 pr-8\"\r\n          >\r\n            {title}\r\n          </h2>\r\n\r\n          {/* Botón de cierre optimizado */}\r\n          <button\r\n            type=\"button\"\r\n            onClick={handleClose}\r\n            className=\"text-slate-400 hover:text-slate-600 dark:hover:text-slate-300 transition-all duration-200 p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:ring-offset-2 flex-shrink-0\"\r\n            aria-label=\"Cerrar modal\"\r\n          >\r\n            <X size={24} />\r\n          </button>\r\n        </header>\r\n\r\n        {/* Contenido principal del modal - con scroll independiente mejorado */}\r\n        <main\r\n          id=\"modal-content\"\r\n          className=\"flex-1 min-h-0 p-6 pt-4 overflow-y-auto overflow-x-hidden custom-scrollbar focus:outline-none\"\r\n          tabIndex={-1}\r\n          style={{\r\n            maxHeight: \"calc(90vh - 100px)\",\r\n            overflowY: \"auto\",\r\n            WebkitOverflowScrolling: \"touch\",\r\n          }}\r\n        >\r\n          {children}\r\n        </main>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n// Exporta el componente memoizado con comparación personalizada\r\nexport default React.memo(Modal, (prevProps, nextProps) => {\r\n  // Comparación optimizada para evitar re-renders innecesarios\r\n  return (\r\n    prevProps.isOpen === nextProps.isOpen &&\r\n    prevProps.title === nextProps.title &&\r\n    prevProps.children === nextProps.children\r\n  );\r\n});\r\n","import React, { useCallback, useMemo } from \"react\";\r\nimport Modal from \"../layout/Modal\"; // Corregido: Ruta actualizada para acceder a la carpeta layout\r\nimport { AlertTriangle } from \"lucide-react\";\r\n\r\n/**\r\n * CustomConfirmModal\r\n * Modal de confirmación reutilizable para acciones críticas.\r\n * Permite al usuario confirmar o cancelar una acción peligrosa.\r\n * Utiliza el componente Modal como contenedor base.\r\n *\r\n * @param {Object} props - Propiedades del componente\r\n * @param {boolean} props.isOpen - Controla la visibilidad del modal\r\n * @param {Function} props.onClose - Función que cierra el modal (cancelar)\r\n * @param {Function} props.onConfirm - Función que ejecuta la acción de confirmación\r\n * @param {string} [props.title=\"Confirmación\"] - Título del modal (opcional)\r\n * @param {string} [props.message=\"¿Estás seguro?\"] - Mensaje de confirmación (opcional)\r\n * @param {string} [props.confirmButtonText=\"Confirmar\"] - Texto del botón de confirmación (opcional)\r\n * @param {string} [props.cancelButtonText=\"Cancelar\"] - Texto del botón de cancelar (opcional)\r\n * @param {string} [props.variant=\"danger\"] - Variante del modal (danger, warning, info)\r\n * @returns {JSX.Element|null} El modal de confirmación o null si no está abierto\r\n */\r\nconst CustomConfirmModal = ({\r\n  isOpen,\r\n  onClose,\r\n  onConfirm,\r\n  title = \"Confirmación\",\r\n  message = \"¿Estás seguro?\",\r\n  confirmButtonText = \"Confirmar\",\r\n  cancelButtonText = \"Cancelar\",\r\n  variant = \"danger\",\r\n}) => {\r\n  // Estilos memoizados basados en la variante del modal\r\n  const buttonStyles = useMemo(() => {\r\n    const variants = {\r\n      danger: \"bg-red-600 hover:bg-red-700 focus:ring-red-500\",\r\n      warning: \"bg-yellow-600 hover:bg-yellow-700 focus:ring-yellow-500\",\r\n      info: \"bg-blue-600 hover:bg-blue-700 focus:ring-blue-500\",\r\n    };\r\n\r\n    return {\r\n      confirm: `px-4 py-2 text-sm font-medium text-white rounded-lg shadow-sm \r\n                flex items-center transition-all duration-200 \r\n                focus:outline-none focus:ring-2 focus:ring-offset-2 \r\n                ${variants[variant] || variants.danger}`,\r\n      cancel: `px-4 py-2 text-sm font-medium text-slate-700 bg-slate-100 \r\n               hover:bg-slate-200 dark:bg-gradient-to-br dark:from-slate-800/70 dark:to-slate-700/50 dark:text-slate-200 \r\n               dark:hover:bg-slate-600 rounded-lg shadow-sm transition-all \r\n               duration-200 focus:outline-none focus:ring-2 focus:ring-slate-500 \r\n               focus:ring-offset-2 backdrop-blur-sm border dark:border-slate-600/30`,\r\n    };\r\n  }, [variant]);\r\n\r\n  // Manejadores de eventos optimizados con useCallback\r\n  const handleConfirm = useCallback(() => {\r\n    if (onConfirm) {\r\n      onConfirm();\r\n    }\r\n  }, [onConfirm]);\r\n\r\n  const handleCancel = useCallback(() => {\r\n    if (onClose) {\r\n      onClose();\r\n    }\r\n  }, [onClose]);\r\n\r\n  // Manejo de teclas para accesibilidad\r\n  const handleKeyDown = useCallback(\r\n    event => {\r\n      if (event.key === \"Enter\") {\r\n        handleConfirm();\r\n      } else if (event.key === \"Escape\") {\r\n        handleCancel();\r\n      }\r\n    },\r\n    [handleConfirm, handleCancel]\r\n  );\r\n\r\n  // Renderizado condicional optimizado\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <Modal\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      title={title}\r\n      onKeyDown={handleKeyDown}\r\n    >\r\n      {/* Contenedor del mensaje de confirmación con mejor estructura semántica */}\r\n      <div className=\"text-slate-700 dark:text-slate-300 mb-6\">\r\n        <div className=\"flex items-start space-x-3\">\r\n          {/* Ícono de advertencia según la variante */}\r\n          <div className=\"flex-shrink-0\">\r\n            <AlertTriangle\r\n              size={20}\r\n              className={`${\r\n                variant === \"danger\"\r\n                  ? \"text-red-500\"\r\n                  : variant === \"warning\"\r\n                    ? \"text-yellow-500\"\r\n                    : \"text-blue-500\"\r\n              }`}\r\n              aria-hidden=\"true\"\r\n            />\r\n          </div>\r\n          {/* Mensaje principal */}\r\n          <div className=\"flex-1\">\r\n            <p className=\"text-sm leading-relaxed\">{message}</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Contenedor de botones de acción con mejor accesibilidad */}\r\n      <div className=\"flex justify-end space-x-3 pt-4 border-t border-slate-200 dark:border-slate-600\">\r\n        {/* Botón Cancelar */}\r\n        <button\r\n          type=\"button\"\r\n          onClick={handleCancel}\r\n          className={buttonStyles.cancel}\r\n          aria-label=\"Cancelar acción\"\r\n        >\r\n          {cancelButtonText}\r\n        </button>\r\n\r\n        {/* Botón Confirmar */}\r\n        <button\r\n          type=\"button\"\r\n          onClick={handleConfirm}\r\n          className={buttonStyles.confirm}\r\n          aria-label={`Confirmar: ${message}`}\r\n          autoFocus\r\n        >\r\n          <AlertTriangle size={16} className=\"mr-2\" aria-hidden=\"true\" />\r\n          {confirmButtonText}\r\n        </button>\r\n      </div>\r\n    </Modal>\r\n  );\r\n};\r\n\r\n// Exporta el componente memoizado con comparación profunda para optimizar renders\r\nexport default React.memo(CustomConfirmModal);\r\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name CirclePlus\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIxMCIgLz4KICA8cGF0aCBkPSJNOCAxMmg4IiAvPgogIDxwYXRoIGQ9Ik0xMiA4djgiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/circle-plus\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst CirclePlus = createLucideIcon('CirclePlus', [\n  ['circle', { cx: '12', cy: '12', r: '10', key: '1mglay' }],\n  ['path', { d: 'M8 12h8', key: '1wcyev' }],\n  ['path', { d: 'M12 8v8', key: 'napkw2' }],\n]);\n\nexport default CirclePlus;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name RotateCcw\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMyAxMmE5IDkgMCAxIDAgOS05IDkuNzUgOS43NSAwIDAgMC02Ljc0IDIuNzRMMyA4IiAvPgogIDxwYXRoIGQ9Ik0zIDN2NWg1IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/rotate-ccw\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst RotateCcw = createLucideIcon('RotateCcw', [\n  ['path', { d: 'M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8', key: '1357e3' }],\n  ['path', { d: 'M3 3v5h5', key: '1xhq8a' }],\n]);\n\nexport default RotateCcw;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Trash2\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMyA2aDE4IiAvPgogIDxwYXRoIGQ9Ik0xOSA2djE0YzAgMS0xIDItMiAySDdjLTEgMC0yLTEtMi0yVjYiIC8+CiAgPHBhdGggZD0iTTggNlY0YzAtMSAxLTIgMi0yaDRjMSAwIDIgMSAyIDJ2MiIgLz4KICA8bGluZSB4MT0iMTAiIHgyPSIxMCIgeTE9IjExIiB5Mj0iMTciIC8+CiAgPGxpbmUgeDE9IjE0IiB4Mj0iMTQiIHkxPSIxMSIgeTI9IjE3IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/trash-2\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Trash2 = createLucideIcon('Trash2', [\n  ['path', { d: 'M3 6h18', key: 'd0wm0j' }],\n  ['path', { d: 'M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6', key: '4alrt4' }],\n  ['path', { d: 'M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2', key: 'v07s0e' }],\n  ['line', { x1: '10', x2: '10', y1: '11', y2: '17', key: '1uufr5' }],\n  ['line', { x1: '14', x2: '14', y1: '11', y2: '17', key: 'xtxkd' }],\n]);\n\nexport default Trash2;\n"],"names":["Tag","createLucideIcon","d","key","cx","cy","r","fill","Minus","SHOPPING_CONFIG","Object","freeze","BASE_TIMESTAMP","Date","toISOString","DEFAULT_ITEM_STATE","checked","price","quantity","custom","toBuy","CATEGORIES","SUPERMARKET","DEFAULT_SHOPPING_CATEGORIES","DAIRY","MEAT","PRODUCE","HYGIENE","OTHERS","ITEMS_DATA","name","id","DEFAULT_SHOPPING_ITEMS","generateShoppingItems","items","entries","forEach","_ref2","category","categoryItems","_ref3","push","_ref","_objectSpread","createdAt","createShoppingItem","ITEMS_BY_CATEGORY","reduce","acc","item","Set","map","Map","TOTAL_ITEMS","length","CATEGORIES_COUNT","keys","ITEMS_PER_CATEGORY","fromEntries","_ref4","STORAGE_CONFIG","ITEMS_KEY","SETTINGS_KEY","DEBOUNCE_DELAY","PRICE_CONFIG","MIN_VALUE_FOR_FORMATTING","THOUSANDS_SEPARATOR","DECIMAL_SEPARATOR","DECIMAL_PLACES","log","error","warn","info","ShoppingList","showToast","shoppingItems","setShoppingItems","useState","newItemName","setNewItemName","newItemCategory","setNewItemCategory","selectedCategoryFilter","setSelectedCategoryFilter","isLoadingShoppingList","setIsLoadingShoppingList","errorShoppingList","setErrorShoppingList","userShoppingCategories","setUserShoppingCategories","newCustomCategory","setNewCustomCategory","budget","setBudget","isConfirmDeleteItemModalOpen","setIsConfirmDeleteItemModalOpen","itemToDeleteId","setItemToDeleteId","isConfirmResetModalOpen","setIsConfirmResetModalOpen","resetAction","setResetAction","saveTimeoutRef","useRef","formatPrice","parsePrice","formatWhileTyping","useCallback","value","undefined","isNaN","numValue","Number","toString","replace","cleanValue","parseInt","numbersOnly","getLocalShoppingItems","setLocalShoppingItems","getLocalShoppingSettings","setLocalShoppingSettings","async","loadData","Array","isArray","Error","saveData","settings","customCategories","useEffect","localItems","localSettings","validItems","e","updateSettings","newSettings","updateItems","newItems","current","clearTimeout","setTimeout","allShoppingCategories","useMemo","filter","cat","includes","sort","a","b","localeCompare","handleAddCustomCategory","trim","categoryToAdd","c","toLowerCase","handleDeleteCustomCategory","categoryToDelete","currentItems","concat","handleAddItem","preventDefault","newItem","now","Math","random","trackRecipeEvent","addToShoppingList","itemName","listSize","groupedItems","grouped","filteredByCategory","itemsInCategory","numericBudget","totalCost","sum","remainingBudget","handleUpdateItem","field","updates","parsedValue","confirmDeleteItem","handleDeleteItem","handleClearCheckedItems","newItemsAfterClearing","handleResetWhenBudgetExceeded","resetItems","priceDisplay","confirmReset","executeReset","handleBudgetChange","rawValue","target","formattedValue","handleBudgetBlur","numBudget","handlePriceInputChange","itemId","numericValue","handlePriceInputBlur","_objectWithoutProperties","_excluded","_jsx","className","children","_jsxs","message","style","height","ShoppingCart","size","htmlFor","type","placeholder","onChange","onBlur","onClick","onSubmit","PlusCircle","title","X","max","Plus","readOnly","Trash2","abs","disabled","every","RotateCcw","CustomConfirmModal","isOpen","onClose","onConfirm","React","RECIPE_CATEGORIES","DAY_TRANSLATIONS","lunes","martes","miercoles","jueves","viernes","sabado","domingo","ONLINE_RECIPE_LINKS","url","icon","description","TOAST","DURATION","POSITION","MAX_VISIBLE","STORAGE","PREFIX","VERSION","KEYS","RECIPES","SHOPPING_LIST","WEEKLY_PLAN","THEME","USER_CATEGORIES","SHOPPING_CATEGORIES","PERFORMANCE","AUTO_SAVE_DELAY","SEARCH_DELAY","IMAGE_LAZY_THRESHOLD","LIMITS","MAX_RECIPES","MAX_SHOPPING_ITEMS","MAX_CUSTOM_CATEGORIES","MAX_RECIPE_NAME_LENGTH","MAX_INGREDIENT_LENGTH","MAX_INSTRUCTION_LENGTH","LOCALE","DATE_FORMAT","DATE_OPTIONS","weekday","year","month","day","TIME_FORMAT","TIME_OPTIONS","hour","minute","hour12","CURRENCY_FORMAT","CURRENCY_OPTIONS","currency","minimumFractionDigits","maximumFractionDigits","SUCCESS","ERROR","WARNING","INFO","IDLE","LOADING","LIGHT","DARK","SYSTEM","RECIPE","NAME","MIN_LENGTH","MAX_LENGTH","REQUIRED","PREP_TIME","MIN","MAX","PATTERN","SERVINGS","SHOPPING_ITEM","QUANTITY","PRICE","PLACEHOLDER_IMAGE","GITHUB_REPO","DOCUMENTATION","FAST","NORMAL","SLOW","EASING","EASE_IN_OUT","EASE_OUT","EASE_IN","link","Modal","onKeyDown","handleClose","handleOverlayClick","event","currentTarget","handleKeyDown","originalOverflow","document","body","overflow","addEventListener","removeEventListener","role","tabIndex","maxHeight","overflowY","WebkitOverflowScrolling","prevProps","nextProps","confirmButtonText","cancelButtonText","variant","buttonStyles","variants","danger","warning","confirm","cancel","handleConfirm","handleCancel","AlertTriangle","autoFocus","CirclePlus","x1","x2","y1","y2"],"sourceRoot":""}