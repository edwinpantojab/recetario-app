/*! For license information please see 28.23171902.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkrecetario_magico=self.webpackChunkrecetario_magico||[]).push([[28],{28:(e,s,a)=>{a.r(s),a.d(s,{default:()=>S});var l=a(555),t=a(43),r=a(805),i=a(719),d=a(784);const c=(0,d.A)("Utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"j28e5"}]]);var n=a(88),o=a(118),m=a(504),x=a(625),h=a(184),p=a(100),b=a(212),g=a(563),u=a(532),k=a(963),f=a(614);const j=(0,d.A)("Hand",[["path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1fvzgz"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"1kc0my"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8",key:"10h0bg"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]]);var v=a(579);const N=e=>{let{isVisible:s,onClose:a,selectedRecipe:l,onCancel:t}=e;return s?(0,v.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,v.jsxs)("div",{className:"bg-white dark:bg-slate-800 rounded-xl p-6 max-w-sm w-full shadow-2xl border dark:border-slate-700",children:[(0,v.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,v.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,v.jsx)(k.A,{className:"text-emerald-500",size:24}),(0,v.jsx)("h3",{className:"text-lg font-bold text-emerald-700 dark:text-emerald-300",children:"Modo T\xe1ctil"})]}),(0,v.jsx)("button",{onClick:a,className:"p-1 text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200",children:(0,v.jsx)(f.A,{size:20})})]}),l&&(0,v.jsxs)("div",{className:"mb-4 p-3 bg-emerald-50 dark:bg-emerald-900/30 rounded-lg",children:[(0,v.jsx)("p",{className:"text-sm font-medium text-emerald-700 dark:text-emerald-300",children:"Receta seleccionada:"}),(0,v.jsx)("p",{className:"text-emerald-800 dark:text-emerald-200 font-bold",children:l.name})]}),(0,v.jsxs)("div",{className:"space-y-3 mb-6",children:[(0,v.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,v.jsx)("div",{className:"flex-shrink-0 w-6 h-6 bg-emerald-100 dark:bg-emerald-800 rounded-full flex items-center justify-center",children:(0,v.jsx)("span",{className:"text-emerald-600 dark:text-emerald-300 text-sm font-bold",children:"1"})}),(0,v.jsx)("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:"Toca una receta para seleccionarla"})]}),(0,v.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,v.jsx)("div",{className:"flex-shrink-0 w-6 h-6 bg-emerald-100 dark:bg-emerald-800 rounded-full flex items-center justify-center",children:(0,v.jsx)("span",{className:"text-emerald-600 dark:text-emerald-300 text-sm font-bold",children:"2"})}),(0,v.jsx)("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:"Toca el d\xeda donde quieres a\xf1adirla"})]})," ",(0,v.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,v.jsx)(j,{className:"text-emerald-500 mt-0.5",size:16}),(0,v.jsx)("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:"Los d\xedas disponibles se resaltar\xe1n en verde"})]})]}),(0,v.jsxs)("div",{className:"flex space-x-3",children:[(0,v.jsx)("button",{onClick:t,className:"flex-1 px-4 py-2 text-slate-600 dark:text-slate-300 border border-slate-300 dark:border-slate-600 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:"Cancelar"}),(0,v.jsx)("button",{onClick:a,className:"flex-1 px-4 py-2 bg-emerald-500 text-white rounded-lg hover:bg-emerald-600 transition-colors",children:"Entendido"})]})]})}):null};var y=a(662);const w=["lunes","martes","miercoles","jueves","viernes","sabado","domingo"],C={lunes:"Lunes",martes:"Martes",miercoles:"Mi\xe9rcoles",jueves:"Jueves",viernes:"Viernes",sabado:"S\xe1bado",domingo:"Domingo"},D="weeklyPlan",R=()=>(0,b.Ze)(D,(()=>{const e={};return w.forEach((s=>{e[s]=[]})),e})()),A=t.memo((e=>{let{day:s,recipesForThisDay:a,allUserRecipes:l,onDropRecipe:d,onDragOverDay:n,onRemoveRecipeFromDay:o,onRotateRecipeForDay:x,onShowRecipeDetails:h,onMobileTapDay:p,isHighlightedForMobile:b}=e;const u=s.toLowerCase(),{isTouchDevice:k}=(0,g.B)(),f=(0,t.useCallback)((e=>{e.preventDefault();const s=e.dataTransfer.getData("recipeId");s&&d(u,s)}),[u,d]),j=(0,t.useCallback)((()=>{x(u)}),[u,x]),N=(0,t.useCallback)((()=>{k&&p&&p(u)}),[u,p,k]),y=(0,t.useMemo)((()=>C[u]),[u]),w=(0,t.useMemo)((()=>{const e=b?"ring-2 ring-emerald-400 bg-emerald-50 dark:bg-emerald-900/20 transform scale-105":"",s=k&&b?"cursor-pointer":"";return"".concat("bg-slate-50 dark:bg-slate-800 p-4 rounded-xl shadow-md min-h-[250px] flex flex-col border dark:border-slate-700 hover:shadow-lg transition-all duration-200"," ").concat(e," ").concat(s)}),[b,k]);return(0,v.jsxs)("div",{className:w,onDrop:f,onDragOver:n,onClick:N,children:[" ",(0,v.jsxs)("div",{className:"flex justify-between items-center mb-4 pb-2 border-b-2 border-emerald-200 dark:border-emerald-700",children:[(0,v.jsxs)("h3",{className:"text-xl font-semibold text-emerald-700 dark:text-emerald-400",children:[y,b&&(0,v.jsx)("span",{className:"ml-2 text-sm bg-emerald-500 text-white px-2 py-1 rounded-full",children:"TOCA AQU\xcd"})]}),(0,v.jsx)("button",{onClick:j,title:"Rotar receta para ".concat(y),className:"p-1.5 text-indigo-600 hover:text-indigo-800 dark:text-indigo-400 dark:hover:text-indigo-300 rounded-full hover:bg-indigo-100 dark:hover:bg-slate-700 transition-colors duration-150",disabled:0===l.length,type:"button",children:(0,v.jsx)(r.A,{size:18})})]}),(0,v.jsx)("div",{className:"space-y-3 flex-grow custom-scrollbar overflow-y-auto max-h-[400px] p-1 -m-1",children:a.length>0?a.map((e=>{const s=l.find((s=>s.id===e));return s?(0,v.jsx)(m.A,{recipe:s,onShowDetails:h,isDraggable:!1,showDeleteButton:!0,onDelete:()=>o(u,e)},e):(0,v.jsxs)("div",{className:"text-xs text-red-500 p-2 bg-red-50 dark:bg-red-900/50 rounded-md flex items-center",children:[(0,v.jsx)(i.A,{size:16,className:"mr-2 flex-shrink-0"}),(0,v.jsxs)("span",{children:["ID de receta no encontrado: ",e.substring(0,8),"..."]})]},e)})):(0,v.jsxs)("div",{className:"flex flex-col items-center justify-center h-full text-center py-8",children:[(0,v.jsx)(c,{size:32,className:"text-slate-400 dark:text-slate-500 mb-2"}),(0,v.jsx)("p",{className:"text-sm text-slate-400 dark:text-slate-500",children:k?"Toca una receta y luego este d\xeda":"Arrastra recetas aqu\xed"})]})})]})})),M=t.memo((e=>{let{recipe:s,onClose:a}=e;const{getLikes:l,hasUserLiked:r,toggleLike:i}=(0,p.A)(),d=(0,t.useCallback)((e=>"https://placehold.co/600x300/E2E8F0/A0AEC0?text=".concat(encodeURIComponent(e||"Receta"))),[]),c=(0,t.useMemo)((()=>s?d(s.name):""),[s,d]),m=(0,t.useCallback)((e=>{e.target.onerror=null,e.target.src=c}),[c]);return s?(0,v.jsx)(x.A,{isOpen:!!s,onClose:a,title:"",children:(0,v.jsxs)("div",{className:"flex flex-col items-center",children:[(0,v.jsx)("h2",{className:"text-2xl font-bold text-emerald-700 dark:text-emerald-300 mb-2 text-center",children:s.name}),(0,v.jsx)("span",{className:"inline-block bg-amber-200 dark:bg-amber-800 text-amber-800 dark:text-amber-200 text-xs font-semibold px-3 py-1 rounded-full mb-3",children:s.category})," ",(0,v.jsx)("div",{className:"w-full h-48 bg-slate-100 dark:bg-slate-700 rounded-xl mb-4 flex items-center justify-center overflow-hidden",children:(0,v.jsx)("img",{src:s.imageUrl||c,alt:s.name,className:"w-full h-48 object-contain",style:{objectPosition:"center"},loading:"lazy",decoding:"async",onError:m})})," ",(0,v.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 w-full mb-4",children:[(0,v.jsxs)("div",{className:"bg-gradient-to-br from-slate-50 to-emerald-50 dark:from-slate-800/60 dark:to-slate-700/40 rounded-lg p-3 flex items-center gap-2 border dark:border-emerald-400/20 backdrop-blur-sm",children:[(0,v.jsx)(n.A,{size:18,className:"text-emerald-500 flex-shrink-0"}),(0,v.jsx)("span",{className:"font-semibold",children:"Tiempo:"}),(0,v.jsx)("span",{className:"text-sm",children:s.prepTime||"\u2014"})]}),(0,v.jsxs)("div",{className:"bg-gradient-to-br from-slate-50 to-blue-50 dark:from-slate-800/60 dark:to-slate-700/40 rounded-lg p-3 flex items-center gap-2 border dark:border-blue-400/20 backdrop-blur-sm",children:[(0,v.jsx)(o.A,{size:18,className:"text-emerald-500 flex-shrink-0"}),(0,v.jsx)("span",{className:"font-semibold",children:"Porciones:"}),(0,v.jsx)("span",{className:"text-sm",children:s.servings?"".concat(s.servings," personas"):"\u2014"})]})]}),(0,v.jsx)("div",{className:"w-full flex justify-center mb-4",children:(0,v.jsx)(h.A,{recipeId:s.id,likesCount:l(s.id),isLiked:r(s.id),onToggleLike:i,size:"lg",showCount:!0})}),(0,v.jsxs)("div",{className:"w-full mb-4",children:[(0,v.jsxs)("h3",{className:"text-lg font-bold text-emerald-700 dark:text-emerald-300 mb-2 flex items-center",children:[(0,v.jsx)("span",{className:"mr-2",children:"\ud83d\udcdd"}),(0,v.jsx)("span",{children:"Ingredientes"})]}),(0,v.jsx)("ul",{className:"list-disc list-inside text-left space-y-1",children:s.ingredients&&s.ingredients.length>0?s.ingredients.map(((e,s)=>(0,v.jsx)("li",{className:"text-slate-700 dark:text-slate-200 text-sm",children:e},s))):(0,v.jsx)("li",{className:"text-slate-400 dark:text-slate-300 italic",children:"Sin ingredientes"})})]}),(0,v.jsxs)("div",{className:"w-full mb-2",children:[(0,v.jsxs)("h3",{className:"text-lg font-bold text-emerald-700 dark:text-emerald-300 mb-2 flex items-center",children:[(0,v.jsx)("span",{className:"mr-2",children:"\ud83d\udc68\u200d\ud83c\udf73"}),(0,v.jsx)("span",{children:"Instrucciones"})]}),(0,v.jsx)("ol",{className:"list-decimal list-inside text-left space-y-2",children:s.instructions&&s.instructions.length>0?s.instructions.map(((e,s)=>(0,v.jsx)("li",{className:"text-slate-700 dark:text-slate-200 text-sm leading-relaxed",children:e},s))):(0,v.jsx)("li",{className:"text-slate-400 dark:text-slate-300 italic",children:"Sin instrucciones"})})]})]})}):null})),T=e=>{let{allUserRecipes:s,recipes:a,showToast:r,onShowRecipeDetails:i}=e;const[d,c]=(0,t.useState)(R),[n,o]=(0,t.useState)(null),{isTouchDevice:x}=(0,g.B)(),{selectedRecipeForMobile:h,isAddingToDay:p,showMobileInstructions:k,clearMobileSelection:f,setShowMobileInstructions:j}=(0,u.c)();(0,t.useEffect)((()=>{c(R())}),[]);const C=(0,t.useCallback)((e=>{var s;s=e,(0,b.iu)(D,s),c((0,l.A)({},e))}),[]),T=(0,t.useCallback)((e=>{e.preventDefault()}),[]),S=(0,t.useCallback)(((e,a)=>{if(!a)return;const t=(0,l.A)({},d);if(t[e]||(t[e]=[]),!t[e].includes(a)){t[e].push(a),C(t);const l=s.find((e=>e.id===a));l&&y.EU.addToPlanner(a,{recipeName:l.name,day:e,plannerSize:t[e].length}),null===r||void 0===r||r("Receta a\xf1adida al planificador.","success")}}),[d,C,r,s]),z=(0,t.useCallback)(((e,s)=>{const a=(0,l.A)({},d);a[e]&&(a[e]=a[e].filter((e=>e!==s)),C(a),null===r||void 0===r||r("Receta eliminada del planificador.","success"))}),[d,C,r]),U=(0,t.useCallback)((e=>{if(!s||0===s.length)return;const a=s.map((e=>e.id)),t=a[Math.floor(Math.random()*a.length)],i=(0,l.A)({},d);i[e]=[t],C(i),null===r||void 0===r||r("Receta rotada para el d\xeda.","success")}),[s,d,C,r]),L=(0,t.useCallback)((()=>{o(null)}),[]),F=(0,t.useCallback)((e=>{h&&p&&(S(e,h.id),f(),y.EU.addToPlanner(h.id,{recipeName:h.name,day:e,interactionType:"mobile_tap"}),null===r||void 0===r||r("Receta a\xf1adida mediante toque.","success"))}),[h,p,S,f,r]),E=(0,t.useCallback)((()=>{f()}),[f]),I=(0,t.useCallback)((()=>{j(!1)}),[j]),V=(0,t.useMemo)((()=>[...a].sort(((e,s)=>(e.name||"").localeCompare(s.name||"")))),[a]);return(0,v.jsxs)("div",{className:"flex flex-col lg:flex-row gap-4 lg:gap-8 pb-4 lg:pb-8",children:[(0,v.jsxs)("div",{className:"lg:w-3/5 xl:w-2/3",children:[(0,v.jsx)("h2",{className:"text-2xl sm:text-3xl font-bold text-emerald-700 dark:text-emerald-400 mb-4 lg:mb-6 break-words",children:"\ud83d\uddd3\ufe0f Plan Semanal"}),(0,v.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4 lg:gap-6",children:[w.map((e=>(0,v.jsx)(A,{day:e,recipesForThisDay:d[e.toLowerCase()]||[],allUserRecipes:s,onDropRecipe:S,onDragOverDay:T,onRemoveRecipeFromDay:z,onRotateRecipeForDay:U,onShowRecipeDetails:o,onMobileTapDay:F,isHighlightedForMobile:p},e)))," "]})]}),(0,v.jsxs)("div",{className:"lg:w-2/5 xl:w-1/3 space-y-2 lg:space-y-3 p-3 lg:p-4 bg-white dark:bg-slate-800 rounded-xl shadow-xl border dark:border-slate-700",children:[(0,v.jsx)("h2",{className:"text-xl lg:text-2xl xl:text-3xl font-bold text-emerald-700 dark:text-emerald-400 mb-2 break-words",children:"\ud83d\udcda Recetas Disponibles"}),(0,v.jsxs)("p",{className:"text-sm text-slate-600 dark:text-slate-300 mb-2 lg:mb-3",children:[x?"Toca una receta para seleccionarla, luego toca un d\xeda.":"Arrastra una receta a un d\xeda."," "]}),(0,v.jsx)("div",{className:"max-h-[50vh] lg:max-h-[60vh] overflow-y-auto pr-2 custom-scrollbar grid grid-cols-2 lg:grid-cols-2 xl:grid-cols-2 2xl:grid-cols-3 gap-3 lg:gap-4 pb-1 lg:pb-2",children:V.length>0?V.map((e=>(0,v.jsx)(m.A,{recipe:e,onShowDetails:o,isDraggable:!0,showDeleteButton:!1},e.id))):(0,v.jsx)("p",{className:"text-sm py-8 text-center col-span-full text-slate-500 dark:text-slate-400",children:"\ud83c\udf72 No hay recetas. \xa1Crea algunas!"})})]}),(0,v.jsx)(M,{recipe:n,onClose:L}),(0,v.jsx)(N,{isVisible:k,onClose:I,selectedRecipe:h,onCancel:E})]})},S=t.memo(T,((e,s)=>e.allUserRecipes===s.allUserRecipes&&e.recipes===s.recipes&&e.showToast===s.showToast&&e.onShowRecipeDetails===s.onShowRecipeDetails))},805:(e,s,a)=>{a.d(s,{A:()=>l});const l=(0,a(784).A)("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]])}}]);
//# sourceMappingURL=28.23171902.chunk.js.map